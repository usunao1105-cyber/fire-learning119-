<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>社内eラーニング：火災煙の危険性と高度な安全対策</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@300;500;700&family=Shippori+Mincho:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Shippori Mincho', 'Noto Serif JP', serif;
            background-color: #0f172a; /* Slate 900 */
            color: #e2e8f0; /* Slate 200 */
        }
        .luxury-gold-text {
            color: #d4af37;
            background: linear-gradient(to right, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .luxury-border {
            border: 1px solid rgba(212, 175, 55, 0.3);
        }
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }
        .option-radio:checked + div {
            border-color: #d4af37;
            background-color: rgba(212, 175, 55, 0.1);
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a; 
        }
        ::-webkit-scrollbar-thumb {
            background: #475569; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #d4af37; 
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // 全70問のデータベース
        const questionsDatabase = [
            // I. 火災煙の定義、燃焼メカニズム、危険な現象
            {
                id: 1,
                category: "I. 火災煙の定義・メカニズム",
                question: "火災煙（Fire Smoke）の科学的定義として最も正確なものはどれですか。",
                options: [
                    "燃焼によって生じた二酸化炭素（CO2）と水蒸気のみの無害な混合物。",
                    "高温による熱傷を主目的とする、熱気と光の放射。",
                    "燃料物質が熱分解や不完全燃焼によって生成される、ガス、蒸気、および固体微粒子の複雑な混合物。",
                    "燃焼の継続に必要な連鎖反応を促進する化学物質。"
                ],
                correctAnswer: 2,
                explanation: "火災煙は、燃料物質が熱分解（パイロリシス）されたり、不完全燃焼を起こしたりすることによって生成される、ガス、蒸気、および固体微粒子の複雑な混合物であると定義されています。"
            },
            {
                id: 2,
                category: "I. 火災煙の定義・メカニズム",
                question: "火災現場において、熱傷を除き、死傷事故の主要な原因となっている現象は何ですか。",
                options: [
                    "構造崩壊による圧死。",
                    "避難経路の混雑。",
                    "煙の吸入による中毒と低酸素症。",
                    "消火活動による水損。"
                ],
                correctAnswer: 2,
                explanation: "火災現場では、熱傷を上回り、煙の吸入による中毒と低酸素症が死傷事故の主要な原因となっています。"
            },
            {
                id: 3,
                category: "I. 火災煙の定義・メカニズム",
                question: "物が燃えるとき、空気中の酸素が足りずに炭素とうまく合体できない状態を何と呼び、これが火災煙の主な毒性要因となりますか。",
                options: [
                    "完全燃焼。",
                    "酸化反応。",
                    "不完全燃焼。",
                    "熱分解（パイロリシス）。"
                ],
                correctAnswer: 2,
                explanation: "酸素供給量が不十分であると、不完全燃焼となり、熱分解物である炭素が酸素と結合しないでそのまま放出され黒い煙（煤）となり、一酸化炭素なども発生します。"
            },
            {
                id: 4,
                category: "I. 火災煙の定義・メカニズム",
                question: "不完全燃焼によって生成される「黒い煙」の主な正体として正しいものはどれですか。",
                options: [
                    "水蒸気（水の微粒子）。",
                    "二酸化炭素（CO2）ガス。",
                    "炭素の微粒子（煤/スート）。",
                    "シアン化水素（HCN）ガス。"
                ],
                correctAnswer: 2,
                explanation: "黒い煙は炭素の微粒子（煤/スート）であり、不完全燃焼によって発生します。"
            },
            {
                id: 5,
                category: "I. 火災煙の定義・メカニズム",
                question: "燃料に熱が加えられ、酸素がない状態でも高温下で物質が分解し、可燃性ガスが放出される現象を何と呼びますか。",
                options: [
                    "酸化反応。",
                    "燃焼連鎖反応。",
                    "熱分解（パイロリシス）。",
                    "フラッシュオーバー。"
                ],
                correctAnswer: 2,
                explanation: "燃料に熱が加えられると、原子が分解し、気体が発生します。このプロセスは「熱分解（パイロリシス）」と呼ばれ、酸素がない状態でも続きます。"
            },
            {
                id: 6,
                category: "I. 火災煙の定義・メカニズム",
                question: "閉鎖空間での火災において、煙が未燃焼の可燃性ガスや微粒子を含み、特定の濃度と温度に達することで短時間で爆発的な燃焼拡大現象を引き起こすことを何と呼びますか。",
                options: [
                    "バックドラフト。",
                    "フラッシュオーバー。",
                    "換気誘発型燃焼。",
                    "熱分解。"
                ],
                correctAnswer: 1,
                explanation: "煙自体が潜在的な燃料源となり、特定の濃度と温度に達すると、短時間で爆発的な燃焼拡大現象であるフラッシュオーバーを引き起こします。"
            },
            {
                id: 7,
                category: "I. 火災煙の定義・メカニズム",
                question: "現代の合成素材を使った住宅火災で、フラッシュオーバーが発生するまでの時間について、一般的にどれくらいの時間で危険な状態に陥りやすいですか。",
                options: [
                    "17分半。",
                    "1時間以上。",
                    "火災発生後3～4分。",
                    "30秒以内。"
                ],
                correctAnswer: 2,
                explanation: "現代の材料を使った住宅では、火災発生後3～4分でフラッシュオーバーが発生することが多いとされており、非常に短時間で危険な状態になります。"
            },
            {
                id: 8,
                category: "I. 火災煙の定義・メカニズム",
                question: "酸素不足の状態で燻っていた火災が、ドア開口部などからの酸素供給の再開によって突然爆発的に燃え上がる危険な現象を何と呼びますか。",
                options: [
                    "フラッシュオーバー。",
                    "換気誘発型フラッシュオーバー。",
                    "バックドラフト。",
                    "プッシングファイヤー。"
                ],
                correctAnswer: 2,
                explanation: "バックドラフトは、酸素不足の状態で燻っていた火災が、酸素供給の再開によって突然爆発的に燃え上がる危険な現象です。"
            },
            {
                id: 9,
                category: "I. 火災煙の定義・メカニズム",
                question: "火災現場において、可燃性ガスや煙が天井付近に溜まり、その層と下の新鮮な空気の層との境界を何と呼びますか。",
                options: [
                    "燃焼範囲（フラマブルレンジ）。",
                    "避難階。",
                    "ニュートラルプレーン（中性面）。",
                    "竪穴区画。"
                ],
                correctAnswer: 2,
                explanation: "火災が進行する中で、煙は天井近くにたまり、下の方には空気が残ります。この境界をニュートラルプレーン（中性面）と呼びます。"
            },
            {
                id: 10,
                category: "I. 火災煙の定義・メカニズム",
                question: "消防士が火災を抑えるための方法として、「燃料を取り除く」「酸素を遮断する」「熱を取り除く」の3つのうち、最も一般的に消火剤として水が使われるメカニズムはどれですか。",
                options: [
                    "燃料を取り除く。",
                    "酸素を遮断する。",
                    "熱を取り除く。",
                    "連鎖反応を促進する。"
                ],
                correctAnswer: 2,
                explanation: "水が消火剤として優れているのは、水が熱を奪い、火の燃焼に必要な温度を下げる（熱を取り除く）からです。"
            },
            // II. 急性毒性（CO, HCN）と健康リスク
            {
                id: 11,
                category: "II. 急性毒性と健康リスク",
                question: "火災煙に含まれる有毒ガスの中で、致死性の観点から最も有害性の高いガスであると評価されているものはどれですか。",
                options: [
                    "シアン化水素（HCN）。",
                    "硫化水素（H₂S）。",
                    "一酸化炭素（CO）。",
                    "ホルムアルデヒド。"
                ],
                correctAnswer: 2,
                explanation: "一酸化炭素ガス（CO）は、火災時のあらゆる燃焼条件下において、最も有害性の高いガスであると評価されています。"
            },
            {
                id: 12,
                category: "II. 急性毒性と健康リスク",
                question: "一酸化炭素（CO）が人体に毒性を及ぼす主要なメカニズムは、血液中のヘモグロビンと強く結合することですが、その結合力は酸素と比較して約何倍に達しますか。",
                options: [
                    "10倍から20倍。",
                    "50倍から100倍。",
                    "200倍から300倍。",
                    "1,000倍以上。"
                ],
                correctAnswer: 2,
                explanation: "COは、体内で酸素を運搬するヘモグロビンとの結合力において、酸素の200倍から300倍に達します。"
            },
            {
                id: 13,
                category: "II. 急性毒性と健康リスク",
                question: "一酸化炭素（CO）中毒によって引き起こされる生理学的病態の名称として正しいものはどれですか。",
                options: [
                    "組織性アノキシア。",
                    "喘息増悪。",
                    "低酸素性アノキシア。",
                    "メトヘモグロビン血症。"
                ],
                correctAnswer: 2,
                explanation: "COはヘモグロビンと結合し、血液の酸素運搬能力を奪うことで、全身の組織に低酸素状態（低酸素性アノキシア）を引き起こします。"
            },
            {
                id: 14,
                category: "II. 急性毒性と健康リスク",
                question: "シアン化水素（HCN）の主要な発生源となる燃焼材料は、一般的にどのような元素を含んでいますか。",
                options: [
                    "硫黄。",
                    "塩素。",
                    "窒素。",
                    "重金属。"
                ],
                correctAnswer: 2,
                explanation: "HCNは、窒素化合物を含んだすべての材料（軟質ポリウレタンフォーム、ウール、アクリル、ナイロン、ABS樹脂など）が燃焼する際に発生します。"
            },
            {
                id: 15,
                category: "II. 急性毒性と健康リスク",
                question: "シアン化水素（HCN）が人体に毒性を及ぼす主要なメカニズムは、細胞の何を直接的に阻害することですか。",
                options: [
                    "ヘモグロビンとの結合。",
                    "血液の凝固能力。",
                    "肺胞でのガス交換。",
                    "細胞内のチトクローム酸化酵素（細胞呼吸）。"
                ],
                correctAnswer: 3,
                explanation: "HCNは、細胞内のチトクローム酸化酵素を阻害することで、細胞が酸素を利用するプロセスを直接的に停止させます（組織性アノキシア）。"
            },
            {
                id: 16,
                category: "II. 急性毒性と健康リスク",
                question: "現代の構造火災において、一酸化炭素（CO）とシアン化水素（HCN）の両方に同時に曝露した場合に生じる最も深刻な影響は何ですか。",
                options: [
                    "毒性が相殺される。",
                    "低酸素症が緩和される。",
                    "致死的な相乗効果を生み出す。",
                    "COの影響のみが優勢になる。"
                ],
                correctAnswer: 2,
                explanation: "COとHCNの両方に同時に曝露することが常態化しており、COが酸素運搬を、HCNが運ばれた酸素の利用を妨げ、致死的な相乗効果を生み出します。"
            },
            {
                id: 17,
                category: "II. 急性毒性と健康リスク",
                question: "火災煙に含まれる微粒子状物質（PM）のうち、粒径が 2.5μm 以下であり、気道を通過して肺胞まで沈着し、全身性の影響を誘発するものは何ですか。",
                options: [
                    "PM10。",
                    "スート（煤）。",
                    "PM2.5。",
                    "水滴。"
                ],
                correctAnswer: 2,
                explanation: "粒径が 2.5μm 以下のPM2.5は、その極小サイズにより、気道を通過して肺胞まで沈着し、全身性の影響を誘発します。"
            },
            {
                id: 18,
                category: "II. 急性毒性と健康リスク",
                question: "PM2.5の曝露が特に高い感受性を示す高感受性集団として、疫学的に特定された患者群はどれですか。",
                options: [
                    "糖尿病患者。",
                    "癌患者。",
                    "高血圧症患者。",
                    "若年層の健常者。"
                ],
                correctAnswer: 2,
                explanation: "高血圧症の患者がPM2.5曝露に対して最も高い感受性を示すことが特定されており、高血圧症による入院リスクの上昇が示されています。"
            },
            {
                id: 19,
                category: "II. 急性毒性と健康リスク",
                question: "CO中毒の後遺症として、中毒曝露から数日または数週間遅れて、集中力・学習能力の障害やうつ状態などの神経精神症状を来す現象を何と呼びますか。",
                options: [
                    "急性脳症。",
                    "組織性アノキシア。",
                    "遅延性脳症。",
                    "一酸化炭素中毒。"
                ],
                correctAnswer: 2,
                explanation: "一酸化炭素中毒では数週間の経過で神経精神症状を来すことがあり、これを遅延性脳症といいます。"
            },
            {
                id: 20,
                category: "II. 急性毒性と健康リスク",
                question: "遅延性脳症の重症な症状には、集中力・学習能力の障害のほかに、どのような神経症状が含まれますか。",
                options: [
                    "呼吸不全。",
                    "消化器系の重篤な合併症。",
                    "精神病障害、認知障害、震えや動きの鈍さを伴うパーキンソン症候群。",
                    "急激な体重増加。"
                ],
                correctAnswer: 2,
                explanation: "遅延性脳症の重症な症状には、精神病障害、認知障害、震えや動きの鈍さを伴うパーキンソン症候群などがあります。"
            },
            {
                id: 21,
                category: "II. 急性毒性と健康リスク",
                question: "遅延性脳症に対する現在の根本的な治療法の状況はどれですか。",
                options: [
                    "高圧酸素療法が有効である。",
                    "根本的な治療法は確立されており、早期治療が推奨される。",
                    "根本的な治療法は確立されておらず、早期発見と対症療法が基本となる。",
                    "中毒から数年後に自然治癒する。"
                ],
                correctAnswer: 2,
                explanation: "遅発性脳症は、今のところ根本的な治療法は確立されておらず、早期に発見して対症療法を行います。"
            },
            {
                id: 22,
                category: "II. 急性毒性と健康リスク",
                question: "一酸化炭素中毒の急性期治療の基本はどれですか。",
                options: [
                    "HCN解毒剤の投与。",
                    "鎮静剤の投与。",
                    "大量の酸素投与。",
                    "低体温療法。"
                ],
                correctAnswer: 2,
                explanation: "急性期の治療の基本は、大量の酸素投与であり、大量の酸素を投与することによって体内の一酸化炭素を追い払います。"
            },
            {
                id: 23,
                category: "II. 急性毒性と健康リスク",
                question: "従来のHCN解毒剤（亜硝酸ナトリウムなど）が、CO中毒が併発している火災現場の患者に使用される場合に重大なリスクを伴うのはなぜですか。",
                options: [
                    "CO中毒を治療できないため。",
                    "解毒剤がメトヘモグロビンを生成し、わずかに残った正常なヘモグロビンの酸素運搬能力をさらに阻害し、低酸素症を悪化させる危険性があるため。",
                    "HCN中毒の症状を隠蔽し、治療の遅れにつながるため。",
                    "HCN解毒剤はCOを分解する力が非常に強いため、臓器に負担をかけるため。"
                ],
                correctAnswer: 1,
                explanation: "従来のHCN解毒剤が生成するメトヘモグロビンは、CO中毒が併発している場合に、残された正常なヘモグロビンの酸素運搬能力をさらに阻害し、患者の低酸素症を悪化させる危険性があるためです。"
            },
            {
                id: 24,
                category: "II. 急性毒性と健康リスク",
                question: "COとHCN複合ガス中毒に対して、両毒素を生体内のタンパク質より高い親和性で迅速に「引き抜き」、無毒化することを可能にした革新的な合成化合物は何ですか。",
                options: [
                    "Oxy-Max。",
                    "Cyano-Capture。",
                    "hemoCD-Twins（ヘモシーディーツインズ）。",
                    "Carbon-Fixer。"
                ],
                correctAnswer: 2,
                explanation: "同志社大学を中心とする共同研究チームは、COおよびHCN中毒の特効薬となる合成化合物「hemoCD-Twins」を開発しました。"
            },
            {
                id: 25,
                category: "II. 急性毒性と健康リスク",
                question: "hemoCD-Twinsを致死に近いCOおよびHCNに曝露されたマウスに投与した実験で、生存率は約何パーセントを超えましたか。",
                options: [
                    "50%。",
                    "60%。",
                    "70%。",
                    "80%。"
                ],
                correctAnswer: 3,
                explanation: "致死に近いCOおよびHCNに曝露され行動停止状態に陥ったマウスにhemoCD-Twinsを投与したところ、生存率は 80% を超え、急速に行動を回復することが実験で明らかになっています。"
            },
            {
                id: 26,
                category: "II. 急性毒性と健康リスク",
                question: "一酸化炭素中毒の後遺症である遅延性脳症のリスクを鑑み、急性期に回復し退院した患者に対する指導として最も適切なものはどれですか。",
                options: [
                    "数年間は自宅で絶対安静にする。",
                    "精神状態が不安定になったら我慢せずに専門医に相談する。",
                    "呼吸器の症状がなければ再診は不要である。",
                    "高圧酸素療法を毎週受ける。"
                ],
                correctAnswer: 1,
                explanation: "遅発性脳症のリスクを鑑み、精神状態が不安定になったら、我慢しないで専門医に相談するよう患者への指導が必要です。"
            },
            {
                id: 27,
                category: "II. 急性毒性と健康リスク",
                question: "火災後の環境復旧プロセスにおいて、厳格な管理と外部への拡散防止策が求められる危険物質として、シアン化物のほかに挙げられるものは何ですか。",
                options: [
                    "水蒸気（H2O）。",
                    "一酸化炭素（CO）。",
                    "重金属およびダイオキシン類。",
                    "メタンガス。"
                ],
                correctAnswer: 2,
                explanation: "火災後の環境復旧では、シアン化物、重金属、および燃焼残渣に含まれるダイオキシン類などの危険物質のサンプリング、分離、および外部への拡散防止策を厳格に実行する必要があります。"
            },
            {
                id: 28,
                category: "II. 急性毒性と健康リスク",
                question: "塩素含有ポリマー、特に塩化ビニル（PVC）が燃焼した際に、主に発生し、吸入すると気道や肺組織で強い酸性の腐食作用を発揮するガスは何ですか。",
                options: [
                    "シアン化水素。",
                    "塩素ガス（Cl₂）。",
                    "塩化水素（HCl）。",
                    "硫化水素（H₂S）。"
                ],
                correctAnswer: 2,
                explanation: "塩化ビニル（PVC）が燃焼すると、主に塩化水素（HCl）が発生し、吸入すると気道や肺組織で強い酸性の腐食作用を発揮します。"
            },
            {
                id: 29,
                category: "II. 急性毒性と健康リスク",
                question: "ダイオキシン類が意図せず副生成物として発生するために必要な主要な化学元素は何ですか。",
                options: [
                    "炭素、酸素、水素、鉄。",
                    "硫黄、窒素、水素。",
                    "炭素、酸素、水素、塩素。",
                    "窒素、酸素、リン。"
                ],
                correctAnswer: 2,
                explanation: "ダイオキシン類は、炭素、酸素、水素、そして塩素が熱せられる過程において副生成物として発生します。"
            },
            {
                id: 30,
                category: "II. 急性毒性と健康リスク",
                question: "管理された廃棄物焼却施設において、ダイオキシン類の生成を防ぐためにダイオキシン類対策特別措置法等で定められている焼却条件はどれですか。",
                options: [
                    "焼却温度 500℃ 以上、燃焼滞留時間 0.5 秒以上。",
                    "焼却温度 700℃ 以下、燃焼滞留時間 5 秒以上。",
                    "焼却温度 800℃ 以上、燃焼滞留時間 2 秒以上。",
                    "焼却温度 1,000℃ 以上、燃焼滞留時間 1 秒未満。"
                ],
                correctAnswer: 2,
                explanation: "ダイオキシン類対策特別措置法では、完全燃焼によってダイオキシンを生成しないようにするための条件として、焼却温度 800℃ 以上、燃焼滞留時間 2 秒以上とし、空気を十分供給することが定められています。"
            },
            // III. 慢性健康リスクと除染戦略
            {
                id: 31,
                category: "III. 慢性健康リスクと除染",
                question: "火災現場に潜む見えない危険として、長期的な健康リスク（がん）の主要因であり、IARC（国際がん研究機関）によりヒトに対して発がん性があるグループ1に分類されている物質は何ですか。",
                options: [
                    "シアン化水素（HCN）。",
                    "ホルムアルデヒド。",
                    "煤（スート/黒色炭素）。",
                    "アントラセン。"
                ],
                correctAnswer: 2,
                explanation: "IARCは、煤（スート/黒色炭素）自体をヒトに対して発がん性があるグループ1に分類しており、消防士の健康リスクの中心的な要因となります。"
            },
            {
                id: 32,
                category: "III. 慢性健康リスクと除染",
                question: "発がん性物質が燃焼時に生成される過程で、煤の前駆体として形成され、その多くが発がん性物質である物質は何ですか。",
                options: [
                    "一酸化炭素（CO）。",
                    "二酸化炭素（CO2）。",
                    "多環芳香族炭化水素（PAH）。",
                    "窒素酸化物（NOx）。"
                ],
                correctAnswer: 2,
                explanation: "煤は不完全燃焼により生成されますが、その生成過程において、煤の前駆体としてPAH（多環芳香族炭化水素）が形成されます。PAHの多くは発がん性物質であるため、煤が発がん性物質であると考えられています。"
            },
            {
                id: 33,
                category: "III. 慢性健康リスクと除染",
                question: "火災現場で活動する消防士が、発がん性物質などの有害化学物質に暴露されるリスクは、一般人に比べて約何パーセント高いという研究結果がありますか。",
                options: [
                    "5%。",
                    "10%。",
                    "15%。",
                    "25%。"
                ],
                correctAnswer: 2,
                explanation: "実際に、消防士のがん発症リスクは一般人に比べて15%も高いという研究結果があります。"
            },
            {
                id: 34,
                category: "III. 慢性健康リスクと除染",
                question: "火災現場後の除染が重要である理由の一つに、汚染された防護装備（PPE）が引き起こす「二次汚染」があります。二次汚染によって汚染が広がる可能性がある場所として、最も関連性の低いものはどれですか。",
                options: [
                    "消防車内。",
                    "署内（消防署の建物内）。",
                    "隊員の家庭。",
                    "火災現場の近隣の公園。"
                ],
                correctAnswer: 3,
                explanation: "汚染されたPPE（防護装備）は、消防車内や署内、さらには家庭にも汚染を広げる可能性があり、二次汚染の防止が重要です。"
            },
            {
                id: 35,
                category: "III. 慢性健康リスクと除染",
                question: "熱い火災現場に長時間いた後ほど、皮膚からの化学物質の吸収リスクが増大します。皮膚温が 5℃ 上がると、化学物質の吸収率は何パーセント増加するとされていますか。",
                options: [
                    "50%。",
                    "100%。",
                    "200%。",
                    "400%。"
                ],
                correctAnswer: 3,
                explanation: "皮膚温が 5℃ 上がると、化学物質の吸収率は400%増加するという研究があり、熱い現場ほどリスクが増大します。"
            },
            {
                id: 36,
                category: "III. 慢性健康リスクと除染",
                question: "現場でできる除染の具体的な手順として、皮膚の汚染除去を行う際に、赤ちゃん用おしりふきなどで重点的に拭くべき体幹の部位はどこですか。",
                options: [
                    "足首、ひざ、太もも。",
                    "首、顎、喉、脇の下、手。",
                    "背中、腰、お尻。",
                    "頭頂部、額、頬。"
                ],
                correctAnswer: 1,
                explanation: "皮膚の汚染除去では、赤ちゃん用おしりふきなどで、首・顎・喉・脇の下・手を重点的に拭くことが推奨されています。"
            },
            {
                id: 37,
                category: "III. 慢性健康リスクと除染",
                question: "汚染された防火衣を帰署前に隔離する際に、適切な措置はどれですか。",
                options: [
                    "消防車の座席にそのまま置く。",
                    "乾燥を促すため、開けたままの袋に入れる。",
                    "ビニール袋や専用ケースで密閉し、消防車の車内には極力入れない。",
                    "水を大量にかけて、濡れた状態で保管する。"
                ],
                correctAnswer: 2,
                explanation: "汚染された防火衣は、ビニール袋や専用ケースで密閉し、消防車の車内には極力入れないことが二次汚染防止に不可欠です。"
            },
            {
                id: 38,
                category: "III. 慢性健康リスクと除染",
                question: "発がん性物質が付着した防護装備（PPE）の洗浄方法として、科学的根拠に基づき最も効果が高いとされているものはどれですか。",
                options: [
                    "毛先の柔らかいブラシを用いた手洗い。",
                    "汚染物質を溶解させた溶剤による洗浄。",
                    "防火衣用洗濯機または家庭用洗濯機を用いた機械洗浄。",
                    "エアコンプレッサーによる空気での吹き付け。"
                ],
                correctAnswer: 2,
                explanation: "発がん性物質の除染効果を比較した実験では、手洗いよりも、防火衣用洗濯機及び家庭用洗濯機による洗浄効果が高くなったことが示されています。"
            },
            {
                id: 39,
                category: "III. 慢性健康リスクと除染",
                question: "発がん性物質（アントラセン、BaP）に汚染させた生地片を用いた洗浄効果の比較実験において、同種の洗浄方法であれば、洗浄効果を高めるために推奨される条件はどれですか。",
                options: [
                    "低い水温を使用し、同時に洗濯する枚数を増やす。",
                    "排水量を増やし、洗剤の量を減らす。",
                    "より高い水温または少ない枚数（洗濯負荷量を減らす）で洗浄する。",
                    "乾燥時間を極端に短くする。"
                ],
                correctAnswer: 2,
                explanation: "同種洗浄方法であれば、高い水温または少ない枚数で洗浄した方が、洗浄効果が高くなると考えられています。"
            },
            {
                id: 40,
                category: "III. 慢性健康リスクと除染",
                question: "防火衣用洗濯機を用いた実験において、ISOで定められている防火衣の洗濯時の水温上限温度として参考とされた温度は何度ですか。",
                options: [
                    "30℃。",
                    "40℃。",
                    "60℃。",
                    "80℃。"
                ],
                correctAnswer: 2,
                explanation: "ISOで定められている防火衣の高度な洗濯時の水温上限温度は 60℃ であり、これを参考として実験が行われました。"
            },
            {
                id: 41,
                category: "III. 慢性健康リスクと除染",
                question: "家庭用洗濯機（渦巻き型）を用いて常温水で洗浄した場合でも、高い洗浄効果が得られた主な理由として、実験で示唆されたのは何ですか。",
                options: [
                    "水温が高かったため。",
                    "渦巻き状の水流による衣類同士のこすり合わせ（強い機械作用）が有効であったため。",
                    "洗浄に使用した洗剤が特殊であったため。",
                    "設置場所が限定的であったため。"
                ],
                correctAnswer: 1,
                explanation: "家庭用洗濯機（渦巻き型）は、渦巻き状の水流を発生させて衣類同士をこすり合わせるため、防火衣に有効に機械作用を与えられたことが洗浄効果の理由と考えられます。"
            },
            {
                id: 42,
                category: "III. 慢性健康リスクと除染",
                question: "ブラシによる防火衣の洗浄が、発がん性物質を除去する選択肢として現実的でないと考えられる主な理由は何ですか。",
                options: [
                    "繊維の損傷を防止するため、固いブラシを使用できないから。",
                    "機械洗浄と比較して洗浄効果が低く、ISOにおいて発がん性物質の洗浄方法として認められていないから。",
                    "ブラシがすぐに劣化してしまうから。",
                    "大量の水と洗剤が必要になるから。"
                ],
                correctAnswer: 1,
                explanation: "ブラシによる洗浄は、機械洗浄と比較して除染率が低く、またISOにおいて発がん性物質を洗浄する選択肢としては認められていないことから、現実的でないと考えられます。"
            },
            {
                id: 43,
                category: "III. 慢性健康リスクと除染",
                question: "火災現場活動後に、遅れて呼吸不全を起こす可能性があるため、急性期の治療後も継続的に注意深くモニタリングすべき症状はどれですか。",
                options: [
                    "頭痛やめまい。",
                    "息苦しさの悪化、咳や喘鳴の出現。",
                    "皮膚の発疹。",
                    "消化器系の痛み。"
                ],
                correctAnswer: 1,
                explanation: "遅れて呼吸不全を起こすようなときは、治療に繋げるため、急性期の治療後も息苦しさが悪化していないか、咳や喘鳴が出現していないかをチェックし続ける必要があります。"
            },
            {
                id: 44,
                category: "III. 慢性健康リスクと除染",
                question: "除染の文化を消防組織に根付かせるために、組織全体で取り組むべきこととして挙げられているものは何ですか。",
                options: [
                    "個人の判断に任せること。",
                    "汚れた装備を「勲章」と見なす意識を維持すること。",
                    "除染ルールのマニュアル化、定期的な研修やチェック体制の構築、除染設備の設置。",
                    "除染をコスト削減のための手段とすること。"
                ],
                correctAnswer: 2,
                explanation: "今後は、組織全体で除染のルールを整備し、定期的な研修やチェック体制を構築すること、および除染設備の設置が必要とされています。"
            },
            {
                id: 45,
                category: "III. 慢性健康リスクと除染",
                question: "消防士のがんリスク低減対策として、防火衣への発がん性物質の付着防止加工や、現場での放水やエアによる除染などが考えられる一方で、家庭用洗濯機の導入における課題として挙げられているものは何ですか。",
                options: [
                    "設置場所の確保が困難であること。",
                    "防水性の衣類（防火衣）を洗浄した場合、脱水時に異常振動により洗濯機が転倒・損傷するおそれがあること。",
                    "家庭用洗濯機は防火衣用洗濯機よりも非常に高価であること。",
                    "機械作用による防火衣への損傷度合いが明確に判明していること。"
                ],
                correctAnswer: 1,
                explanation: "一般的な家庭用洗濯機は、防水性の衣類（防火衣）を洗浄した場合、脱水時に洗濯機が異常振動することで、洗濯機が転倒もしくは使用者が受傷するおそれがあるため、防水性の衣類を洗濯することを禁止している場合が多いです。"
            },
            // IV. 火災の動態、拡大、および消火技術
            {
                id: 46,
                category: "IV. 火災の動態と消火技術",
                question: "火災現場において、廊下などの水平空間における煙の拡散速度は通常 0.3 から 0.8 m/秒 ですが、階段室やエレベーターシャフトのような垂直空間における煙の上昇速度はどれくらいの速さに達しますか。",
                options: [
                    "0.5 m/秒 （人間の避難速度と同じ）。",
                    "1 から 2 m/秒。",
                    "3 から 5 m/秒。",
                    "10 m/秒 以上。"
                ],
                correctAnswer: 2,
                explanation: "階段室やエレベーターシャフトのような垂直空間における煙の上昇速度は桁違いに速く、3 から 5 m/秒 に達すると言われています。"
            },
            {
                id: 47,
                category: "IV. 火災の動態と消火技術",
                question: "火災現場において、垂直避難経路における煙の上昇速度（ 3 から 5 m/秒 ）は、人間が階段を昇降する際の通常の移動速度（約 0.5 m/秒 ）と比較してどう評価されますか。",
                options: [
                    "ほぼ同等であり、安全確保は容易である。",
                    "人間の避難速度の方が速いため、垂直避難は最も安全である。",
                    "煙の速度が人間の避難速度をわずかに上回るため、若干の注意が必要である。",
                    "煙の速度が人間の避難速度を圧倒的に上回るため、垂直避難の信頼性は低い。"
                ],
                correctAnswer: 3,
                explanation: "垂直拡散の速度（ 3 から 5 m/秒 ）が、人間の避難速度（約 0.5 m/秒 ）を圧倒的に上回るため、高層建築物における垂直避難の信頼性は極めて低いことを示しています。"
            },
            {
                id: 48,
                category: "IV. 火災の動態と消火技術",
                question: "消防活動における「プッシングファイヤー（火を押す現象）」とは、主にどのような放水方法によって引き起こされる危険な現象ですか。",
                options: [
                    "ストレート放水。",
                    "ショートパルスによるガス冷却。",
                    "流量の誤った勢いのある放水や噴霧注水。",
                    "ホースを短く素早く噴射するパルス放水。"
                ],
                correctAnswer: 2,
                explanation: "流量の誤った勢いのある放水、特に噴霧注水では、水蒸気の膨張や放水の勢いにより火勢が押し出され、延焼拡大されることがあります。"
            },
            {
                id: 49,
                category: "IV. 火災の動態と消火技術",
                question: "プッシングファイヤーのリスクを回避し、熱成層（煙や熱の層）を崩さずに消火活動を行うために、基本的に優先することが望ましいとされる放水方法はどれですか。",
                options: [
                    "噴霧注水。",
                    "ロングパルス放水。",
                    "ストレート放水。",
                    "ガス冷却。"
                ],
                correctAnswer: 2,
                explanation: "基本的に放水はストレートを優先することが望ましいとされています。ストレート放水は空気を送り込まず、乱流防止効果があり、熱成層をつぶさずに消火できます。"
            },
            {
                id: 50,
                category: "IV. 火災の動態と消火技術",
                question: "ガス冷却を行う主な目的として最も適切なものはどれですか。",
                options: [
                    "可燃物を燃焼させて無毒化すること。",
                    "煙の色を観察しやすくすること。",
                    "高温のガスや煙のエネルギーを水に移動させて温度を低減し、消防士の安全を確保すること。",
                    "燃焼の3要素のうち、酸素を遮断すること。"
                ],
                correctAnswer: 2,
                explanation: "ガス冷却は、燃焼により発生する高温のガスや煙のエネルギーを低減させ、現場の温度を下げるための技術であり、消防士の安全確保と火災拡大防止が目的です。"
            },
            {
                id: 51,
                category: "IV. 火災の動態と消火技術",
                question: "ガス冷却において、水を効率的に使い、高温のガスと広範囲で接触させてエネルギーを奪うために推奨される水の撒き方はどれですか。",
                options: [
                    "ジェット状（ストレート）の大量放出。",
                    "霧状の水。",
                    "氷の塊を投下する。",
                    "大量の泡を吹き付ける。"
                ],
                correctAnswer: 1,
                explanation: "水を効率的に使うためには、ホースから水を霧状に撒くことで、無数の小さな水滴が発生し、高温のガスと広範囲で接触し、効率的に温度を下げることができます。"
            },
            {
                id: 52,
                category: "IV. 火災の動態と消火技術",
                question: "ガス冷却の技術のうち、周囲のガスや煙を冷却し、安全に進むためにホースを短く素早く噴射する方法を何と呼びますか。",
                options: [
                    "ロングパルス。",
                    "ジェットパルス。",
                    "短いパルス（ショートパルス）。",
                    "フルアタック。"
                ],
                correctAnswer: 2,
                explanation: "周囲のガスや煙を冷却するために、ホースを短く素早く噴射する方法は短いパルス（ショートパルス）と呼ばれます。"
            },
            {
                id: 53,
                category: "IV. 火災の動態と消火技術",
                question: "消防士が火災現場でドアを開ける際に、熱気や高濃度の有害ガスから身を守るために最も推奨される行動はどれですか。",
                options: [
                    "ドアの開口部に水を噴霧し続ける。",
                    "天井付近の高温の煙の流れの中を避ける。",
                    "床近くに身を構える（姿勢を低くする）。",
                    "窓をすべて開け、煙を外部に逃がす。"
                ],
                correctAnswer: 2,
                explanation: "ドアを開ける際には、床近くに身を構えることで安全を確保します。床付近は温度が低く、視界も確保しやすいためです。"
            },
            {
                id: 54,
                category: "IV. 火災の動態と消火技術",
                question: "酸素が不足し火が鎮静化していた空間に、酸素が再び供給されると急激に火が再燃し激化する現象を何と呼びますか。",
                options: [
                    "バックドラフト。",
                    "換気誘発型フラッシュオーバー（ventilation-induced flashover）。",
                    "プッシングファイヤー。",
                    "熱分解。"
                ],
                correctAnswer: 1,
                explanation: "酸素が不足すると火は一時的に鎮静化しますが、酸素が再び供給されると急激に火が再燃し、激化することがあり、これを換気誘発型フラッシュオーバーといいます。"
            },
            {
                id: 55,
                category: "IV. 火災の動態と消火技術",
                question: "重度の吸入性損傷が発生した場合に、刺激性ガスや熱気による熱傷により気道粘膜が損傷し、炎症反応によって肺組織内に液体が蓄積する病態は何ですか。",
                options: [
                    "無気肺。",
                    "組織性アノキシア。",
                    "肺水腫。",
                    "遅延性脳症。"
                ],
                correctAnswer: 2,
                explanation: "刺激性ガスや熱気による熱傷により、気道粘膜が脱落し、炎症反応によって肺組織内に液体が蓄積する肺水腫が発生します。"
            },
            // V. 安全管理、避難行動、AI検知システム
            {
                id: 56,
                category: "V. 安全管理・避難・AI検知",
                question: "火災発生時の基本行動として、「初期消火」、「避難」、「通報」のうち、すべてを実施することが難しい状況の際に最も優先すべき行動はどれですか。",
                options: [
                    "初期消火。",
                    "通報。",
                    "避難。",
                    "責任者への連絡・報告。"
                ],
                correctAnswer: 2,
                explanation: "すべてを実施することが難しい状況であれば、避難を優先することとされています。"
            },
            {
                id: 57,
                category: "V. 安全管理・避難・AI検知",
                question: "直通階段へ避難する際、火災の延焼拡大や煙の影響を遅らせるために避難者が必ず実施すべき行動はどれですか。",
                options: [
                    "階段室の戸を全て開放し、換気する。",
                    "避難器具を使用して、すぐに地上へ降りる。",
                    "火災の発生した室及び避難通路や階段室に設置されている戸等を必ず閉鎖してから避難する。",
                    "放送設備を使用して、他のフロアに状況を知らせる。"
                ],
                correctAnswer: 2,
                explanation: "避難者は、煙等の影響を遅らせるため、可能な限り火災が発生した居室等の戸等を閉鎖すること。避難通路や階段室に設置されている戸等は必ず閉鎖してから避難することとされています。"
            },
            {
                id: 58,
                category: "V. 安全管理・避難・AI検知",
                question: "直通階段や避難上有効なバルコニーが使用できない場合に、一時的に人命安全が保たれるよう防火的に区画されたスペースを何と呼びますか。",
                options: [
                    "防火区画。",
                    "竪穴区画。",
                    "退避区画。",
                    "待合室。"
                ],
                correctAnswer: 2,
                explanation: "退避区画は、「消防隊が到着するまでの間、一時的に人命安全が保たれるよう、直通階段から離れた位置にある居室や廊下等の室、又はこれらの部分について、防火的に区画された退避スペース」のことをいいます。"
            },
            {
                id: 59,
                category: "V. 安全管理・避難・AI検知",
                question: "退避区画に退避した後、煙の流入を防ぐために推奨される具体的な措置はどれですか。",
                options: [
                    "退避区画の戸は開放したままにしておく。",
                    "戸を確実に閉鎖し、必要であればガムテープやアルミテープ等により戸の隙間を塞ぐ。",
                    "窓を開放し、換気を行う。",
                    "避難器具を使用して、すぐに地上へ避難する。"
                ],
                correctAnswer: 1,
                explanation: "退避区画内に煙が流入するのを防ぐため、退避区画の戸を確実に閉鎖し、避難者がいないと判断できる場合には、ガムテープやアルミテープ等により戸の隙間を塞ぐことが推奨されています。"
            },
            {
                id: 60,
                category: "V. 安全管理・避難・AI検知",
                question: "火災の通報において、責任者等への連絡・報告と消防機関への通報の優先順位について、適切な判断はどれですか。",
                options: [
                    "責任者への連絡・報告を優先する。",
                    "消防機関への通報を優先し、遅れがないように注意する。",
                    "自動火災報知設備の発信機を手動操作することが最優先である。",
                    "放送設備で在館者に火災発生を知らせることが最優先である。"
                ],
                correctAnswer: 1,
                explanation: "速やかに消防機関へ通報すること。責任者等への連絡・報告を優先することによる通報の遅れがないように注意することとされています。"
            },
            {
                id: 61,
                category: "V. 安全管理・避難・AI検知",
                question: "直通階段等が一つしかない建築物において、避難ができなくなることを防ぐために、階段室等の維持管理で極めて重要であるとされるのは何ですか。",
                options: [
                    "避難器具の撤去。",
                    "階段室への物品の大量保管。",
                    "直通階段等の防火・防煙区画化。",
                    "階段室の窓の常時開放。"
                ],
                correctAnswer: 2,
                explanation: "直通階段等を介して上階に煙が拡散することにより避難ができなくなることを防ぐため、直通階段等の防火・防煙区画化が極めて重要です。"
            },
            {
                id: 62,
                category: "V. 安全管理・避難・AI検知",
                question: "階段、廊下、避難口などに物品を放置することが避難安全上問題となる主な理由はどれですか。",
                options: [
                    "避難経路を確保できなくなることのみが問題となる。",
                    "避難が困難になる可能性があり、また物品が可燃物の場合は放火や延焼拡大の要因にもなるため。",
                    "監視カメラの設置場所が限られてしまうため。",
                    "物品の温度が上昇し、火災感知器が誤作動するため。"
                ],
                correctAnswer: 1,
                explanation: "階段、廊下、避難口等に物品等がある場合は、避難が困難になる可能性があり、また当該物品等が可燃物の場合は、放火や延焼拡大の要因にもなるためです。"
            },
            {
                id: 63,
                category: "V. 安全管理・避難・AI検知",
                question: "防火戸等の竪穴区画を構成する設備の維持管理において、日常的に確認すべき最も重要な事項の一つはどれですか。",
                options: [
                    "防火戸等が常時開放状態であること。",
                    "防火戸等が煙感知器の作動と連動して閉鎖する機能が停止していること。",
                    "防火戸等の閉鎖障害となるくさびや物品等がないか。",
                    "防火戸等の色が建築物の外壁と一致していること。"
                ],
                correctAnswer: 2,
                explanation: "竪穴区画を構成する防火戸等が正常に作動するように、防火戸等の閉鎖障害となるくさびや物品等がないか日常的に確認し、適正に維持管理することが求められます。"
            },
            {
                id: 64,
                category: "V. 安全管理・避難・AI検知",
                question: "廃棄物処理施設のごみピットにおいて、AI画像認識技術を用いた「Think View for Fire-Smoke」や「Smoke AI」といった検知システムが重要視される主な理由は何ですか。",
                options: [
                    "従来の温度センサーや目視では、ごみの表層の発火しか検知できないため。",
                    "ごみ表層から沈んだ深い部分での発火による初期の煙を、迅速に画像認識によって捉えるため。",
                    "AIが自動的にごみを分別するため。",
                    "リチウムイオン電池の廃棄量が減少しているため。"
                ],
                correctAnswer: 1,
                explanation: "AIシステムは、従来の検知方法では困難だった、ごみ表層から沈んだ深い部分での発火による初期の煙を画像認識によって素早く検知し、火災被害の拡大を防ぎます。"
            },
            {
                id: 65,
                category: "V. 安全管理・避難・AI検知",
                question: "AI煙検知システムの実用化にあたり、「検知精度の向上」のために活用された特殊な技術は何ですか。",
                options: [
                    "赤外線センサーの解像度を向上させる技術。",
                    "画像生成AIによって生成された大量の煙や発火画像を教師データとして活用する技術。",
                    "ごみピット内の温度を均一に保つ技術。",
                    "現場オペレータの経験則のみをAIロジックに組み込む技術。"
                ],
                correctAnswer: 1,
                explanation: "AIモデルの精度を高めるために、画像生成AIを活用し、大量の煙や発火画像を教師データとして活用することで、高い検知精度を実現しました。"
            },
            {
                id: 66,
                category: "V. 安全管理・避難・AI検知",
                question: "AI検知システムの実運用において、「誤検知の削減」が極めて重要とされる主な理由は何ですか。",
                options: [
                    "AIモデルの再現率が低下するため。",
                    "誤検知が繰り返し発生すると、オペレータがシステムを信頼しなくなり、実際の火災時に適切な対応が行われなくなる恐れがあるため。",
                    "教師データの収集が困難になるため。",
                    "画像生成AIの学習効率が低下するため。"
                ],
                correctAnswer: 1,
                explanation: "誤検知が繰り返し発生すると、オペレータはシステムを信頼しなくなり、実際に火災が発生した場合に適切な対応が行われなくなってしまう恐れがあるためです。"
            },
            {
                id: 67,
                category: "V. 安全管理・避難・AI検知",
                question: "「Think View for Fire-Smoke」において、ごみ投入扉から投入された土砂による誤検知を防止するために導入された仕組みは何ですか。",
                options: [
                    "AIの検出感度を大幅に下げる。",
                    "ごみ投入扉の開閉データを用いて、投入扉が開いていた時間帯のAI検知を判定から除外するロジックを組み合わせた。",
                    "土砂の色を認識しないようにAIモデルを再学習させた。",
                    "監視カメラの数を減らした。"
                ],
                correctAnswer: 1,
                explanation: "誤検知を回避するため、ごみ投入扉の開閉データなどの設備情報を活用し、AIモデルが検知したエリアのごみ投入扉が開いていた場合は、判定から除外するというロジックを組み込みました。"
            },
            {
                id: 68,
                category: "V. 安全管理・避難・AI検知",
                question: "廃棄物処理施設において、火災発生リスクを減らすための重要な予防対策として、受け入れ時に徹底すべきことは何ですか。",
                options: [
                    "ごみピットの温度を常に 800℃ 以上に保つこと。",
                    "火災危険性が高い物品（LPGボンベ、スプレー缶、バッテリー等）の分別・選別を徹底すること。",
                    "すべてのごみを水に浸して可燃性を失わせること。",
                    "従業員による巡回を完全に廃止し、AIに全て任せること。"
                ],
                correctAnswer: 1,
                explanation: "廃棄物処理施設においては、火災危険性が高い物品（LPGボンベ、スプレー缶等、危険物容器、マッチ、花火、バッテリー等）の分別・選別が、火災予防のための重要な対策として挙げられています。"
            },
            {
                id: 69,
                category: "V. 安全管理・避難・AI検知",
                question: "廃棄物が大量に高く堆積している屋外処理施設で火災が発生した場合、消火作業を困難にする主要な問題点として挙げられていることは何ですか。",
                options: [
                    "火災の継続時間が短く、消火チームの出動が間に合わないこと。",
                    "集積物が非常に高く積まれ、消火水の浸透性が低く、重機による掘り起こしが必要となること。",
                    "廃棄物が全て不燃物であるため、燃焼が起きないこと。",
                    "監視カメラが設置されていないため、火元を特定できないこと。"
                ],
                correctAnswer: 1,
                explanation: "廃棄物が大量に高く堆積している場合、消火水の浸透性が低い（放水された水が浸透しにくい）ため消火が困難になり、重機により堆積物を掘り起こすなどの対応が必要となります。"
            },
            {
                id: 70,
                category: "V. 安全管理・避難・AI検知",
                question: "消防用設備等の点検報告の実施が必要とされる理由として最も適切なものはどれですか。",
                options: [
                    "点検結果を公衆に広く公開するため。",
                    "設備がいついかなる時に火災が発生してもその機能を有効に発揮できるものでなければならないため。",
                    "設備の法定耐用年数を延長させるため。",
                    "法令で定められていないが、自主的に行うことが強く推奨されているため。"
                ],
                correctAnswer: 1,
                explanation: "消防用設備等は、火災が発生した場合にはじめて使用されるものであり、いついかなる時に火災が発生してもその機能を有効に発揮できるものでなければならないため、定期的な点検報告が必要です。"
            }
        ];

        // ユーティリティ: 配列をシャッフルする関数
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function App() {
            const [currentQuestions, setCurrentQuestions] = useState([]);
            const [userAnswers, setUserAnswers] = useState({});
            const [showResults, setShowResults] = useState(false);
            const [score, setScore] = useState(0);
            const [isStarted, setIsStarted] = useState(false);

            // 問題の初期化（ランダム10問抽出）
            const initializeQuiz = () => {
                const shuffled = shuffleArray(questionsDatabase);
                const selected = shuffled.slice(0, 10); // 10問に変更
                setCurrentQuestions(selected);
                setUserAnswers({});
                setShowResults(false);
                setScore(0);
                setIsStarted(true);
                window.scrollTo(0, 0);
            };

            // 初回ロード時にも初期化
            useEffect(() => {
                initializeQuiz();
            }, []);

            // 回答選択時の処理
            const handleAnswerSelect = (questionId, optionIndex) => {
                if (showResults) return; // 結果表示後は変更不可
                setUserAnswers(prev => ({
                    ...prev,
                    [questionId]: optionIndex
                }));
            };

            // 採点処理
            const calculateScore = () => {
                let newScore = 0;
                currentQuestions.forEach(q => {
                    if (userAnswers[q.id] === q.correctAnswer) {
                        newScore += 10; // 10問で100点満点とするなら1問10点
                    }
                });
                setScore(newScore);
                setShowResults(true);
                window.scrollTo(0, 0);
            };

            // スタート画面
            if (!isStarted) {
                return (
                    <div className="min-h-screen flex items-center justify-center p-4">
                        <div className="text-center animate-pulse">
                            <h1 className="text-3xl font-serif text-white mb-4">読み込み中...</h1>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen pb-20">
                    {/* Header */}
                    <header className="fixed top-0 w-full z-50 glass-panel border-b border-yellow-600/30">
                        <div className="max-w-4xl mx-auto px-6 py-4 flex justify-between items-center">
                            <h1 className="text-xl md:text-2xl font-serif font-bold luxury-gold-text tracking-wider">
                                eラーニング
                            </h1>
                            <div className="text-sm text-slate-400 font-serif">
                                火災煙の危険性と高度な安全対策
                            </div>
                        </div>
                    </header>

                    <main className="pt-28 max-w-4xl mx-auto px-4 md:px-6 space-y-8">
                        
                        {/* 結果表示エリア */}
                        {showResults && (
                            <div className="glass-panel rounded-lg p-8 text-center animate-fade-in luxury-border relative overflow-hidden">
                                <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-yellow-500 to-transparent"></div>
                                <h2 className="text-2xl font-serif text-slate-200 mb-2">採点結果</h2>
                                <div className="text-5xl md:text-6xl font-bold luxury-gold-text mb-4 font-serif">
                                    {score}<span className="text-2xl ml-2 text-slate-400">/ 100点</span>
                                </div>
                                <p className="text-slate-400 mb-6">
                                    {score === 100 ? "素晴らしい結果です。知識は完全に定着しています。" : 
                                     score >= 70 ? "合格圏内ですが、誤答箇所を確認しましょう。" : 
                                     "理解を深めるため、解説を熟読して再挑戦してください。"}
                                </p>
                                <button 
                                    onClick={initializeQuiz}
                                    className="px-8 py-3 bg-gradient-to-r from-yellow-700 to-yellow-600 hover:from-yellow-600 hover:to-yellow-500 text-white rounded shadow-lg transition-all duration-300 font-serif tracking-widest border border-yellow-400/30"
                                >
                                    再挑戦する
                                </button>
                            </div>
                        )}

                        {/* 問題リスト */}
                        {currentQuestions.map((q, index) => {
                            const isCorrect = userAnswers[q.id] === q.correctAnswer;
                            const userAnswered = userAnswers[q.id] !== undefined;
                            
                            return (
                                <div key={q.id} className="glass-panel rounded-lg p-6 md:p-8 luxury-border transition-all duration-500 hover:bg-slate-800/50">
                                    <div className="flex items-center mb-4 text-xs tracking-widest text-yellow-500/80 font-serif">
                                        <span className="mr-2 border border-yellow-500/30 px-2 py-1 rounded">QUESTION {index + 1}</span>
                                        <span>{q.category}</span>
                                    </div>
                                    
                                    <h3 className="text-lg md:text-xl font-medium leading-relaxed mb-6 text-slate-100 font-serif">
                                        {q.question}
                                    </h3>

                                    <div className="space-y-3">
                                        {q.options.map((option, optIndex) => {
                                            let optionClass = "relative flex items-center p-4 rounded border transition-all cursor-pointer group ";
                                            
                                            if (showResults) {
                                                if (optIndex === q.correctAnswer) {
                                                    optionClass += "border-green-500/50 bg-green-900/20 ";
                                                } else if (userAnswers[q.id] === optIndex) {
                                                    optionClass += "border-red-500/50 bg-red-900/20 ";
                                                } else {
                                                    optionClass += "border-slate-700 opacity-50 ";
                                                }
                                            } else {
                                                if (userAnswers[q.id] === optIndex) {
                                                    optionClass += "border-yellow-500/80 bg-yellow-900/20 shadow-[0_0_15px_rgba(234,179,8,0.1)] ";
                                                } else {
                                                    optionClass += "border-slate-700 hover:border-slate-500 hover:bg-slate-800 ";
                                                }
                                            }

                                            return (
                                                <label key={optIndex} className={optionClass}>
                                                    <input
                                                        type="radio"
                                                        name={`question-${q.id}`}
                                                        value={optIndex}
                                                        checked={userAnswers[q.id] === optIndex}
                                                        onChange={() => handleAnswerSelect(q.id, optIndex)}
                                                        disabled={showResults}
                                                        className="option-radio hidden"
                                                    />
                                                    <div className={`w-5 h-5 rounded-full border flex items-center justify-center mr-4 transition-colors ${
                                                        userAnswers[q.id] === optIndex ? 'border-yellow-500' : 'border-slate-500 group-hover:border-slate-400'
                                                    }`}>
                                                        {userAnswers[q.id] === optIndex && <div className="w-2.5 h-2.5 rounded-full bg-yellow-500"></div>}
                                                    </div>
                                                    <span className="flex-1 text-slate-300 text-sm md:text-base">{option}</span>
                                                    
                                                    {showResults && optIndex === q.correctAnswer && (
                                                        <span className="absolute right-4 text-green-400 font-bold text-sm">正解</span>
                                                    )}
                                                    {showResults && userAnswers[q.id] === optIndex && optIndex !== q.correctAnswer && (
                                                        <span className="absolute right-4 text-red-400 font-bold text-sm">不正解</span>
                                                    )}
                                                </label>
                                            );
                                        })}
                                    </div>

                                    {/* 解説エリア（結果発表時のみ表示） */}
                                    {showResults && (
                                        <div className="mt-6 pt-6 border-t border-slate-700/50 animate-fade-in">
                                            <div className="flex items-start gap-3">
                                                <div className="mt-1 min-w-[4px] h-12 bg-yellow-600/50 rounded-full"></div>
                                                <div>
                                                    <h4 className="text-yellow-500 font-serif text-sm mb-2 font-bold">理由 / 根拠</h4>
                                                    <p className="text-slate-400 text-sm leading-relaxed">
                                                        {q.explanation}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    )}
                                </div>
                            );
                        })}

                        {/* アクションボタン */}
                        <div className="py-8 flex justify-center">
                            {!showResults ? (
                                <button
                                    onClick={calculateScore}
                                    disabled={Object.keys(userAnswers).length < 10}
                                    className={`
                                        px-12 py-4 rounded shadow-lg text-lg font-serif tracking-widest transition-all duration-300
                                        ${Object.keys(userAnswers).length < 10 
                                            ? 'bg-slate-700 text-slate-500 cursor-not-allowed' 
                                            : 'bg-gradient-to-r from-yellow-700 to-yellow-600 hover:from-yellow-600 hover:to-yellow-500 text-white shadow-yellow-900/20 hover:shadow-yellow-600/30 transform hover:-translate-y-1'}
                                    `}
                                >
                                    採点する
                                </button>
                            ) : (
                                <button
                                    onClick={initializeQuiz}
                                    className="px-12 py-4 bg-transparent border border-yellow-600/50 text-yellow-500 hover:bg-yellow-600/10 rounded shadow-lg transition-all duration-300 font-serif tracking-widest"
                                >
                                    別の問題に挑戦する
                                </button>
                            )}
                        </div>
                    </main>

                    <footer className="mt-12 py-6 text-center text-slate-600 text-xs font-serif border-t border-slate-800">
                        <p>© Internal Fire Safety E-Learning. All rights reserved.</p>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
