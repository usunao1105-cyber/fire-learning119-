<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>巨大地震情報 防災e-Learning</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (for JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- Icon Components (SVG) ---
        const BookOpen = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
        );
        const CheckCircle = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
        );
        const RefreshCw = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
            </svg>
        );
        const ChevronRight = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        );
        const ChevronLeft = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
        );
        const Award = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="8" r="7"></circle>
                <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
            </svg>
        );
        const HelpCircle = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
        );
        const AlertTriangle = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                <line x1="12" y1="9" x2="12" y2="13"></line>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
        );

        // --- Data ---
        const originalQuestions = [
            { id: 1, q: "なぜ、大規模地震に備える上で「日頃からの地震への備え」が最も重要だとされるのですか？", a: "現在の科学的知見では、南海トラフ地震の発生時期・場所・規模を確度高く予測することはできず、異常な現象が観測されず、情報発表がないまま突発的に大規模地震が発生することもあるためです。また、Mw8クラス以上の大規模地震は、後発地震への注意を促す情報が発表されていない状況で突発的に発生することが多いことに留意が必要です。" },
            { id: 2, q: "「後発地震」とは何ですか？", a: "先に発生した地震（先発地震）や地殻変動（ゆっくりすべりケース）の後に、引き続いて発生するおそれがある大規模地震のことを指します。" },
            { id: 3, q: "南海トラフ地震臨時情報には、どのようなキーワードが付記されますか？", a: "主に「調査中」、「巨大地震警戒」、「巨大地震注意」、「調査終了」の4つのキーワードが付記されます。" },
            { id: 4, q: "南海トラフ地震臨時情報（巨大地震警戒）が発表される最も主要な条件は何ですか？", a: "想定震源域内のプレート境界において、モーメントマグニチュード（Mw）8.0以上の地震が発生したと評価された場合です。" },
            { id: 5, q: "南海トラフ地震臨時情報（巨大地震注意）が発表されるトリガー事象には、どのようなものがありますか？", a: "地震性のトリガーとして、監視領域内においてMw 7.0以上の地震が発生したと評価された場合、または非地震性のトリガーとして、想定震源域内のプレート境界面で通常とは異なるゆっくりすべりが発生したと評価された場合です。" },
            { id: 6, q: "南海トラフ地震臨時情報（巨大地震警戒）発表時、後発地震の発生可能性は平常時と比べてどの程度高まりますか？", a: "平常時のおおむね0.1％程度に対し、約100倍程度高い状況（約7％）にあるとされています。" },
            { id: 7, q: "南海トラフ地震臨時情報（巨大地震注意）発表時の、大規模地震の発生可能性は平常時と比べてどの程度高まりますか？", a: "平常時のおおむね0.1％程度に対し、数倍程度高い状況（約0.4％）にあるとされています。" },
            { id: 8, q: "北海道・三陸沖後発地震注意情報が発表される基準は何ですか？", a: "日本海溝・千島海溝沿いの巨大地震の想定震源域及びそれに影響を与える外側のエリアで、モーメントマグニチュード（Mw）7.0以上の地震が発生した場合です。" },
            { id: 9, q: "南海トラフ地震臨時情報と北海道・三陸沖後発地震注意情報における、防災対応の最も決定的な違いは何ですか？", a: "南海トラフシステムにはMw 8.0以上の地震発生時に事前避難を伴う「巨大地震警戒」レベルが存在しますが、北海道・三陸沖システムではMw 7.0以上の地震発生時でも事前避難の呼びかけは行わず、「備えの徹底」に留める点です。" },
            { id: 10, q: "「巨大地震警戒対応」が求められる期間として設定されているのは、地震発生後、何週間ですか？", a: "最も警戒すべき期間として、地震発生から1週間を基本と設定しています。" },
            { id: 11, q: "南海トラフ地震臨時情報（巨大地震注意）が発表された場合の防災対応期間は、地震トリガーとゆっくりすべり（SSE）トリガーで違いがありますか？", a: "地震トリガーの場合は発生から1週間ですが、ゆっくりすべりケースの場合は、すべりの変化が収まってから、変化していた期間とおおむね同程度の期間が経過するまでが巨大地震注意対応期間となります。" },
            { id: 12, q: "南海トラフ地震臨時情報（巨大地震注意）が発表された際の主な行動要請は何ですか？", a: "日常生活を継続しつつ、日頃からの地震への備えの再確認と、すぐに逃げられる態勢の維持や非常持出品の常時携帯などの特別な備えを実施することが基本となります。" },
            { id: 13, q: "北海道・三陸沖後発地震注意情報が発表された場合の、後発地震の発生確率はどの程度ですか？", a: "Mw7.0以上の地震発生後7日以内にMw8クラス以上（Mw7.8以上）の後発地震が発生する確率は、世界的な事例を踏まえても、概ね百回に1回程度とされています。" },
            { id: 14, q: "南海トラフ地震臨時情報（巨大地震警戒）発表後、後発地震が発生しないまま1週間が経過した場合、防災対応はどうなりますか？", a: "巨大地震警戒対応（事前避難等）を終了し、さらに1週間、巨大地震注意対応（日頃の備えの再確認と特別な備え）をとるよう呼び掛けられます。" },
            { id: 15, q: "巨大地震情報が発表されても、必ず大規模地震が発生するわけではないことを、国民はどのように捉えるべきですか？", a: "大規模地震が発生しなかった場合でも、「空振り」と捉えるのではなく、いつか発生する巨大地震への備えの徹底や防災意識の向上につながる予行演習としての「素振り」と捉えられる社会となることが望ましいとされています。" },
            { id: 16, q: "住民が「日頃からの地震への備え」を再確認する際に、家族との連絡手段について具体的に何を確認すべきですか？", a: "災害用伝言ダイヤル（171）や災害用掲示板の使用方法を確認するなど、別々の場所にいるときに災害が発生した場合でもお互いの安否を確認できるよう、安否確認の方法や家族の集合場所を事前に話し合っておく必要があります。" },
            { id: 17, q: "「日頃からの地震への備え」として、屋内における家具類の転倒防止対策について具体的に何をすべきですか？", a: "タンス類や本棚、冷蔵庫、テレビなどについて、転倒防止器具を使用して壁に固定したり、キャスター付きの収納やベッド等を固定したりすることを確認します。" },
            { id: 18, q: "住民が地震発生後の避難生活に備えるために、最低限備蓄しておくべきものには何がありますか？", a: "水や食料の備蓄を多めに確保することに加え、簡易トイレ、携帯ラジオや携帯電話の予備バッテリー等を準備することが必要です。" },
            { id: 19, q: "津波や土砂災害のリスクが高い地域に住んでいる場合、平常時からどのような避難先を検討しておくべきですか？", a: "津波、土砂災害等のリスクが高いところでは、不安がある場合に避難できる安全な知人宅、親類宅等を検討することが望ましいとされています。" },
            { id: 20, q: "巨大地震注意対応時に、住民に求められる「特別な備え」のうち、「すぐに逃げられる態勢の維持」には具体的にどのような行動が含まれますか？", a: "昼夜問わず津波警報等が発表されても速やかに避難し命を守ることができるよう、すぐに逃げられる服装で就寝することや、非常持出品を常に手元に置いておくことなどが含まれます。" },
            { id: 21, q: "避難行動要支援者への支援を確実にするため、住民として日頃から備えるべきことは何ですか？", a: "災害対策基本法で作成が努力義務とされている個別避難計画や地区防災計画に基づいた要配慮者支援が有効に機能するよう、自治会や自主防災組織、福祉関係者等で個別避難計画等を再確認しておくことが重要です。" },
            { id: 22, q: "巨大地震情報発表時に、住民が取るべき「火災や延焼の防止対策」には具体的に何がありますか？", a: "火災警報器の電池切れがないことを確認し、不要な電気機器等の使用を控え、コンセントのプラグを抜くこと、コンロやストーブの周囲に燃えやすい物を置かないことなどが挙げられます。" },
            { id: 23, q: "住民は、地震や津波のリスクが高い場所について、どのような意識を持つべきですか？", a: "地域のハザードマップでどのような危険が想定されるかを確認し、耐震性の低い建物や、土砂崩れや津波浸水のおそれがあるところには、できるだけ近づかないように注意することが求められます。" },
            { id: 24, q: "事前避難対象地域に指定されている住民が、臨時情報（警戒）発表後に避難所で避難生活を送る際、食料や生活用品は誰が確保することを基本としますか？", a: "災害が発生した後の避難と異なり、ライフラインや商業施設は稼働していると想定されるため、自らの必要なものは自ら確保することが重要であり、非常用持出品等、1週間を基本とした避難に必要なものを各自で準備することが基本です。" },
            { id: 25, q: "避難所への移動手段として、自動車による避難が基本とされないのはなぜですか？", a: "自動車による避難を行った場合、対象地域で車両が殺到し交通渋滞を招く可能性があり、徒歩による避難者の円滑かつ安全な避難の妨げとなるおそれがあるため、避難方法は徒歩を基本とするためです。" },
            { id: 26, q: "海抜ゼロメートル地帯に居住する住民は、地震に備えてどのようなリスクに留意すべきですか？", a: "地震により河川や海岸の堤防等が損壊し、津波の襲来による浸水被害により、長期間湛水したままの状態が続く可能性があることに留意が必要です。" },
            { id: 27, q: "耐震性の不足する住宅に住んでいる住民に対して、市町村はどのような対応を呼び掛けるべきですか？", a: "住民は、知人宅や親類宅、避難所等への避難をあらかじめ検討する必要があり、市町村は耐震化の重要性を呼び掛け、積極的に耐震化を推進することが重要です。" },
            { id: 28, q: "臨時情報（警戒）発表時の事前避難において、一時帰宅をする際の留意点は何ですか？", a: "生活用品や貴重品等の確保のため一時帰宅する場合でも、帰宅中に地震が発生した場合の安全を自ら確保したうえで実施することに留意が必要です。" },
            { id: 29, q: "土砂災害警戒区域内の要配慮者利用施設の施設管理者に対し、地方公共団体はどのような検討を促すべきですか？", a: "土砂災害防止法に基づき作成している避難確保計画等を参考に、施設利用者の円滑かつ迅速な避難の確保を図るための検討を促すことが望ましいです。" },
            { id: 30, q: "臨時情報発表時、社会的な混乱を防ぐために、住民に特に控えるよう呼びかけられている行動は何ですか？", a: "経済的・社会的混乱を最小限に抑えるため、食料品や生活必需品の必要以上の買いだめ、買い急ぎは控えることが呼びかけられています。" },
            { id: 31, q: "南海トラフ地震臨時情報が発表されなかった場合でも、突発地震に備えて継続すべき最も基本的な備えは何ですか？", a: "国から後発地震に対して注意する措置を解除された後であっても、南海トラフ地震発生の切迫性は高い状態にあり、いつ地震が発生してもおかしくないことに留意し、引き続き巨大な地震・津波に備えることが重要です。" },
            { id: 32, q: "巨大地震警戒対応時、避難所の運営の基本的な考え方を教えてください。", a: "被災後の避難ではないため、避難所の運営は避難者が自ら行うことを基本とし、市町村や地域住民等による運営体制や役割をあらかじめ検討しておくことが必要です。" },
            { id: 33, q: "事前避難対象地域で避難が長期化する場合、避難者はどのような点に特に留意する必要がありますか？", a: "避難生活が長期化するほど、健康への負担は増大し、避難者の心身に悪影響を及ぼし、その後の生活再建を大きく阻害する要因となりかねないため、避難者の健康に配慮した支援や、避難所環境の段階的かつ確実な質の向上を目指すことが重要です。" },
            { id: 34, q: "事業者が臨時情報発表時の防災対応を検討するにあたって、まず最初に行うべき手順は何ですか？", a: "南海トラフ地震に関する事業継続計画（BCP）の内容を改めて確認し、自社の脆弱性（地震発生時に生命に危険を及ぼすような事象など）を把握することが重要です。" },
            { id: 35, q: "BCPが未策定の事業者等については、臨時情報発表時の防災対応を検討するにあたり、どのような措置が求められますか？", a: "BCP未策定の事業者等については、速やかにBCPを策定するほか、事前の防災・減災対策を講ずるなど防災対応力を強化することが望ましいとされています。" },
            { id: 36, q: "巨大地震警戒対応時（1週間）に事業者が検討すべき「必要な事業を継続するための措置」には何が含まれますか？", a: "情報発表時に出社できない可能性のある従業員を把握したうえでの業務に必要な人員の再配置や、代替となる人員や取引先の確保など、企業活動を効率的に継続するための措置について検討する必要があります。" },
            { id: 37, q: "事業者が後発地震に備えて「日頃からの地震への備えの再確認」をする際に、具体的に確認すべき項目を3つ挙げてください。", a: "安否確認手段の確認、什器の固定・落下防止対策の確認、食料や燃料等の備蓄の確認などが挙げられます。" },
            { id: 38, q: "臨時情報（警戒）発表時に「施設及び設備等の点検」を確実に実施する必要がある事業者とは、どのような事業者ですか？", a: "社会的に及ぼす影響が大きい不特定多数の者が利用する施設、または危険物を取扱う施設等を管理または運営する事業者等です。これらの事業者は、第三者に危害を及ぼさないよう必要な点検を確実に実施する必要があります。" },
            { id: 39, q: "施設及び設備等の点検を実施する際、具体的にどのような設備を対象とする必要がありますか？", a: "主要生産設備、施設の耐震診断結果に基づく危険箇所、転倒・落下物の危険箇所、緊急用自動車の点検などが例として挙げられます。" },
            { id: 40, q: "住民事前避難対象地域内に位置する事業者等が「従業員等の安全確保」のために検討すべき措置は何ですか？", a: "通常通りの企業活動をした場合に生命に危険が及ぶ場合には、それを回避するため、市町村が発令する避難指示に従い従業員や利用者等を避難させる等の措置を検討する必要があります。" },
            { id: 41, q: "巨大地震警戒対応時、事業者が「地震に備えて普段以上に警戒する措置」として実施が推奨される行動例を2つ挙げてください。", a: "輸送ルートを津波の危険のある沿岸部から内陸部に変更することや、燃料貯蔵や車両燃料の常時満タン化、製品在庫の増産や原材料・部品の積み増しなどが例として挙げられます。" },
            { id: 42, q: "警戒措置（1週間）終了後、事業継続計画（BCP）において企業は何を継続的に行う必要がありますか？", a: "警戒情報が解除された後も、地震の発生可能性が完全に解消されたわけではないという前提に立ち、備蓄品・資材の補充、および長期的な備え（家具の固定や避難場所の確認など）の継続をBCPに組み込む必要があります。" },
            { id: 43, q: "臨時情報が発表された際、事業者は従業員等へ情報をどのように伝達すべきですか？", a: "勤務時間内及び勤務時間外等の時間帯に応じ、伝達の遅延、誤解がないよう、情報が確実に伝達される経路及び方法を具体的に定める必要があります。" },
            { id: 44, q: "臨時情報（警戒）発表時、防災対応実施要員の確保に関して、特に考慮すべき点は何ですか？", a: "臨時情報が発表される時間帯ごとに参集人員、参集手段等を考慮して所要要員を検討し、特に事前避難対象地域に居住する従業員は出勤ができない可能性があるため、それを考慮する必要がある点です。" },
            { id: 45, q: "臨時情報（注意）発表時における事業者の主な防災対応の基本的な考え方を教えてください。", a: "日頃からの地震への備えの再確認と、特別な備えを実施した上で、社会経済活動を継続することを基本とした防災対応を検討します。" },
            { id: 46, q: "企業が「地域への貢献」として、後発地震に備えた支援を実施する場合、どのようなことを検討すべきですか？", a: "企業特性を活かし、地方公共団体と連携して、自主防災組織との協働体制を構築し、非常食や資機材の提供、または避難先として敷地の提供などを検討することが望ましいとされています。" },
            { id: 47, q: "旅館やホテル等の宿泊施設が、臨時情報（警戒）発表時に検討することが望ましい地域への貢献事例は何ですか？", a: "避難の長期化が見込まれる場合や要配慮者がいる場合に、避難先として客室を提供できる体制を、事前に市町村と連携しながら検討しておくことが望ましいです。" },
            { id: 48, q: "大規模な工場（勤務人員1000人以上）を運営する事業者が、臨時情報（警戒）発表時に推進計画又は対策計画に明示すべき事項は何ですか？", a: "防災要員を除く従業員等の工場からの退避、帰宅等の行動計画を明示する必要があります。" },
            { id: 49, q: "鉄道事業者が臨時情報（警戒）発表時に運行に関してとるべき措置は何ですか？", a: "安全性に留意しつつ、運行するために必要な対応をとるとともに、住民事前避難対象地域については、旅客等の安全確保のため、津波による危険性の回避措置を確実に実施することとされています。" },
            { id: 50, q: "病院や百貨店等の不特定多数の者が利用する施設が、臨時情報（警戒）発表時に営業を継続する場合、どのような点に配慮すべきですか？", a: "新たな大規模地震による施設の破損等を防止する措置等の十分な危険回避措置をとったうえで営業を継続し、その際、個々の施設が耐震性・耐浪性を有する等安全性に配慮するものとされています。" },
            { id: 51, q: "電気事業者は、臨時情報（警戒）等が発表された場合、計画にどのような体制を明示する義務がありますか？", a: "電気の供給が災害応急対策の基礎となるため、必要な電力を供給する体制を確保することについて推進計画又は対策計画に明示する必要があります。" },
            { id: 52, q: "ガス事業者は、臨時情報（警戒）等が発表された際に、計画に明示すべき安全確保のための措置は何ですか？", a: "ガス発生設備やガスホルダーその他の設備について、安全確保のための所要の事項を明示するとともに、後発地震に備えて、緊急に供給を停止するなどの措置を講ずる必要がある場合には、その実施すべきこと及びその実施体制を明示する必要があります。" },
            { id: 53, q: "電気通信事業者は、臨時情報（警戒）等が発表された場合に備え、通信の維持に関する体制の確保に加え、特にどのようなサービスの運用と周知を計画に明示すべきですか？", a: "災害応急対策活動や安否確認の基礎となる災害用伝言サービス等の活用に向けた当該サービスの運用、周知等の措置の内容を推進計画又は対策計画に明示するものとされています。" },
            { id: 54, q: "放送事業者は、臨時情報（警戒）等が発表された際、どのような情報伝達の役割を担う必要がありますか？", a: "臨時情報（警戒）等の正確かつ迅速な報道に努めるとともに、推進地域内の地域住民等に対し、冷静な対応を呼び掛けることや、交通・ライフライン情報など、防災行動に必要な情報の提供に努めるものとされています。" },
            { id: 55, q: "道路管理者が臨時情報（警戒）発表時に行う、道路交通対策は何ですか？", a: "事前避難対象地域における車両の走行の自粛の呼び掛けや、高速自動車国道等において公安委員会等が実施する交通規制に対する協力等に努めるものとされています。" },
            { id: 56, q: "鉄道事業者が臨時情報（警戒）発表時にとる「津波による危険性の回避措置」とは、具体的にどのような地域を対象とした措置ですか？", a: "住民事前避難対象地域（市町村が避難指示を発令し、全ての住民が事前避難を要する地域）を対象として、旅客等の安全確保のため確実に実施する措置です。" },
            { id: 57, q: "空港管理者は、巨大地震の発生に備え、従業員に対しどのような確認を徹底すべきですか？", a: "巨大地震の発生に備え、従業員一人ひとりに避難場所や避難経路、避難誘導手順の再確認を徹底する必要があります。" },
            { id: 58, q: "金融機関（計画主体である金融機関）は、臨時情報（警戒）等が発表された場合、どのような業務の円滑な遂行を確保するための準備措置を計画に明示する必要がありますか？", a: "金融業務の円滑な遂行を確保するための要員の配置計画など、事前の準備措置をとるべき内容を推進計画に明示する必要があります。" },
            { id: 59, q: "国が定める指導方針に基づき、金融機関は臨時情報（警戒）発表時において、どのような営業継続の努力が求められますか？", a: "事前避難対象地域を除く推進地域内の地域住民等の日常生活に極力支障を来さないよう、キャッシュサービス等金融機関に係る営業を継続するよう努めることとされています。" },
            { id: 60, q: "病院が臨時情報（警戒）発表時に、患者等の安全確保のため検討すべき措置は何ですか？", a: "事前避難対象地域に位置する病院は、避難指示等が発令された場合、病院外での生活が可能な入院患者の引き渡しや、入院患者の転院の準備について検討することが望ましいとされています。" },
            { id: 61, q: "学校（幼稚園、小・中学校等）の管理・運営者が臨時情報（警戒）発表時に計画に明示すべき保護の方法について、特に留意すべき点は何ですか？", a: "学校の置かれている状況等に応じ、児童生徒等の保護者の意見を聴取するなど、実態に即した保護の方法を定めるよう留意する必要があります。" },
            { id: 62, q: "社会福祉施設が臨時情報（警戒）発表時に検討すべき、利用者等の保護及び保護者への引継ぎの方法を定める際の考慮事項は何ですか？", a: "施設の種類や性格及び個々の施設の耐震性・耐浪性を十分考慮して、その内容を推進計画又は対策計画に具体的に明示する必要があります。" },
            { id: 63, q: "石油類、火薬類、高圧ガス等の製造・貯蔵・処理・取扱いを行う施設が、臨時情報（警戒）発表時に実施すべき応急的保安措置には何がありますか？", a: "津波が襲来したときに発生する可能性のある火災、流出、爆発、漏洩等の発生を防止するため、緊急点検、巡視の実施、充填作業、移替え作業等の停止その他施設の損壊防止のための措置を実施します。" },
            { id: 64, q: "土砂災害警戒区域内に要配慮者利用施設がある場合、臨時情報（警戒）発表時の避難検討にあたり、どのような計画を参考にすることが望ましいですか？", a: "土砂災害防止法に基づき作成している避難確保計画等を参考に、利用者の安全確保を検討することが望ましいです。" },
            { id: 65, q: "地方公共団体が管理する道路、河川等の施設について、臨時情報（警戒）等が発表された場合に計画に明示すべき措置にはどのようなものがありますか？", a: "道路管理上の措置、橋梁、トンネル、法面のうち危険度が特に高いものへの留意、河川・海岸・港湾施設における水門及び閘門の閉鎖手順の確認又は閉鎖などが含まれます。" },
            { id: 66, q: "地方公共団体が庁舎等公共施設について臨時情報（警戒）発表時に機能を果たすために必要な措置を計画に明示する際、含めるべき体制は何ですか？", a: "非常用発電装置の準備、非常用通信手段の確保、水や食料等の備蓄、コンピューター・システム等重要資機材の点検その他所要の措置を実施するための体制を明示する必要があります。" },
            { id: 67, q: "道路管理者が臨時情報（注意）発表時に行うべき対応は、どのようなものですか？", a: "必要に応じ、大規模地震発生後の災害応急対策の確認などを行うとともに、道路情報提供装置等により道路利用者に対する同情報の発発表中の周知徹底、日頃からの地震への備えの再確認を行うものとされています。" },
            { id: 68, q: "商業施設関係の事業者が、臨時情報（注意）発表時に顧客に対して行うべきアナウンスは何ですか？", a: "巨大地震の発生に備えるよう注意を促すとともに、顧客に必要以上の買いだめや買い急ぎを控えるようアナウンスすることが求められます。" },
            { id: 69, q: "通信事業者が臨時情報（注意）発表時に再確認すべき事項には何がありますか？", a: "電気通信事業者による通信輻輳対策の準備や、災害用伝言サービスの運用、運用開始の周知方法等を再確認することが求められます。" },
            { id: 70, q: "地方公共団体が発注する公共事業において、臨時情報（警戒）発表時に受注者に対して求める措置の方針は何ですか？", a: "受注者に対し、あらかじめ定めた施工計画書等の措置内容に基づき、後発地震による揺れの影響が大きい作業または津波による影響を受ける作業について、発注者から一時中止の通知があったものとして、工事を中断し直ちに退避することを求めるものとされています。" },
            { id: 71, q: "南海トラフ地震臨時情報が発表された際、情報発表まで最短でどのくらいの時間がかかりますか？", a: "異常な現象を観測した後、有識者による評価検討会での評価を経て、最短で約2時間程度で「臨時情報（巨大地震警戒、巨大地震注意）」が発表されます。" },
            { id: 72, q: "南海トラフ地震臨時情報が発表された後も、国から注意する措置が解除される前に地震が発生する可能性について、住民はどのように認識しておくべきですか？", a: "国から後発地震に対して注意する措置を解除された後であっても、南海トラフ地震発生の切迫性は高い状態にあり、いつ地震が発生してもおかしくないことに留意が必要です。" },
            { id: 73, q: "南海トラフ地震臨時情報（巨大地震警戒）発表時、事前避難の期間が1週間と設定されている主な理由は何ですか？", a: "地震活動等の観測や予測に基づくものではなく、大規模地震発生の可能性と、住民避難の継続期間に対する社会的な受忍限度をもとに、あらかじめ定めたものであるためです。" },
            { id: 74, q: "地方公共団体が防災対応の検討・決定を行う際、実効性を高めるために特に重要な配慮事項は何ですか？", a: "住民一人ひとりが考え、理解しておくことが重要であるため、必要に応じて住民の意見を十分に聴くことや、地域内の各主体が調和を図りながら防災対応が実行できるよう、検討段階から情報共有や協議を行うことが望ましいとされています。" },
            { id: 75, q: "地方公共団体は、臨時情報発表時の住民の行動について、どのような心構えを促すべきですか？", a: "住民が普段以上に地震に備えて警戒するという心構えを持つことができるよう、ハザードマップ等を活用し、津波・土砂災害等の危険性をあらかじめ把握しておくなど、日常生活を行いつつ、できるだけ安全な行動をとることを促す必要があります。" },
            { id: 76, q: "地方公共団体が、後発地震に備えた津波避難が必要な地域を特定する際の基本的な基準は何ですか？", a: "陸上において津波により30cm以上の浸水が地震発生から30分以内に生じる地域を基本としつつ、後発地震発生後の避難では間に合わないおそれがある地域を対象とします。" },
            { id: 77, q: "南海トラフ地震臨時情報（巨大地震警戒）発表時、災害救助法が適用されるケースとして想定されている状況は何ですか？", a: "臨時情報が発表され、避難所が開設され避難生活が継続すると見込まれる場合、または、Mw8.0以上の南海トラフ地震発生後に、津波及びその後の大規模地震等発生に備え、避難生活を余儀なくされる場合（例：事前避難対象地域等で避難指示が出された場合）です。" },
            { id: 78, q: "後発地震に備えた避難所運営において、「自助、共助」を基本とするために、地域で日頃から構築しておくべき体制は何ですか？", a: "自主防災組織や避難生活支援リーダー/サポーターの育成強化に努め、地域で協力して避難できる体制を構築しておくことが重要です。" },
            { id: 79, q: "臨時情報発表時、地方公共団体が住民に対し情報を広く確実に伝達するため、可能な限り利用すべき手段は何ですか？", a: "停電や機器のトラブルを想定した上で、市町村防災行政無線、広報車、SNS、テレビ・ラジオ放送など、可能な限り多様な伝達手段を組み合わせることが望ましいです。" },
            { id: 80, q: "地方公共団体が災害後の避難所ではなく、後発地震に備えた事前避難時の避難所を選定する際、特に考慮すべき期間は何ですか？", a: "避難所における避難生活が長期化する場合を想定し、1週間を基本とした避難生活が可能な箇所を選定します。" },
            { id: 81, q: "地方公共団体が避難所の受入れ人数を推計する際、宿泊者や観光目的の滞留旅客についてどのように考慮すべきですか？", a: "宿泊施設等関係者と連携して帰宅方法をあらかじめ検討しておき、その上で、必要に応じて帰宅できない見込み数を受入れ人数に加えておく必要があります。" },
            { id: 82, q: "巨大地震警戒対応時において、多くの住民が避難している地域の防犯・防火対策は、どのように実施することが推奨されますか？", a: "地元警察及び地元消防機関と連携する必要があり、後発地震発生時の津波からの避難に十分猶予がある地域については、住民自らの見回りの活用も検討することが推奨されます。" },
            { id: 83, q: "地方公共団体や事業者は、防災訓練を定期的に実施する際、臨時情報に関してどのような点について住民や従業員に周知すべきですか？", a: "国から発表される情報について大規模地震発生の可能性が平常時と比べて相対的に高まったと評価されても、必ず後発地震が起こるものではないこと等、情報の意味を正しく理解するよう周知することが必要です。" },
            { id: 84, q: "南海トラフシステムにおいて「ゆっくりすべりケース」で巨大地震注意情報が発表された場合、想定される社会状況はどのようなものですか？", a: "揺れを感じることはなく、津波も発生せず、交通インフラやライフライン等は通常通りに活動を続けている状況が想定されますが、前例のない事例として社会的にも関心を集めている状況です。" },
            { id: 85, q: "北海道・三陸沖後発地震注意情報では、情報発信の際に、どのような点に配慮したリスクコミュニケーション戦略が重視されていますか？", a: "国民に過度な心配をさせず、とるべき防災対応を正確かつ迅速に国民に伝えることや、情報の発表が「受け手が理解しやすい呼びかけ内容」であることが重視されています。" },
            { id: 86, q: "北海道・三陸沖後発地震注意情報が発表された際、住民に対して推奨される「就寝時の備え」は何ですか？", a: "すぐに逃げられる服装で就寝することや、子どもや高齢者等、要配慮者と同室で就寝すること、室内で最も安全かつ避難しやすい部屋を使用することなどが例示されています。" },
            { id: 87, q: "北海道・三陸沖後発地震注意情報が発信された際、企業が従業員や顧客への情報伝達について確認すべき具体的な項目は何ですか？", a: "施設の全エリアに後発地震への注意を促す情報等を正確に伝達し、避難場所や避難経路、避難誘導手順の再確認を徹底することが求められます。" },
            { id: 88, q: "地方公共団体が、先発地震の揺れが小さく（震度1〜4）被害がなかった地域に対して行うべき、後発地震への備えの呼びかけは何ですか？", a: "揺れが比較的小さかったことに安心することなく、次の大きな地震の発生可能性が高まっていることに注意するよう、また、揺れにより家具等の転倒防止策が緩んでいないか再度点検するよう呼びかけます。" },
            { id: 89, q: "地方公共団体が、先発地震に伴う津波警報・注意報が発表されなかった地域に対して行うべき呼びかけは何ですか？", a: "現在は津波の心配はないものの、次の巨大地震が発生すれば大きな津波が襲来する可能性があることに注意し、近隣の住民間でも呼びかけを行い、気づいていない人にも注意を促すことが求められます。" },
            { id: 90, q: "地方公共団体が、巨大地震警戒対応時に検討すべき、海抜ゼロメートル地帯における防災対応の考え方を教えてください。", a: "堤防等の耐震点検及び耐震化の促進等が重要であり、地震による堤防の破損により早期の浸水の危険性が想定される場合には、必要に応じて事前避難対象地域の指定等の検討を行うことも有効とされています。" },
            { id: 91, q: "地方公共団体の防災対応の検討において、福祉部局や土木部局など多岐にわたる部局が緊密に連携すべき理由は何ですか？", a: "要配慮者や福祉避難所、道路や水道などに関する対応は、防災対応の検討が多岐にわたるため、各部局が緊密に連携して対応できるよう、協力、連絡体制をあらかじめ検討しておく必要があるためです。" },
            { id: 92, q: "臨時情報発表時、事業者が取るべき行動を検討する際、前提となる諸条件として「学校の防災対応」を確認する必要があるのはなぜですか？", a: "事前避難対象地域に位置する学校が臨時休業となった場合、その児童・生徒の保護者である従業員が出社困難となる可能性があるため、企業活動への影響を想定する必要があるからです。" },
            { id: 93, q: "事業者が日頃から備えるべき出火・延焼防止対策にはどのようなものがありますか？", a: "住宅用消火器等の準備、使用方法の再確認、屋外灯油タンクが倒れないかの確認、燃料が安全に備蓄されているかの確認、火災警報器の電池切れ等の確認などが挙げられます。" },
            { id: 94, q: "事業者編チェックリストにおいて、PC等の転倒・すべり防止対策以外に、文書を含む重要な情報について備えるべき事項は何ですか？", a: "文書を含む重要な情報をバックアップし、発災時に同時に被災しない場所に保存しておくことが必要とされています。" },
            { id: 95, q: "南海トラフ地震臨時情報が発表された際、政府が国民に対する周知として、偽・誤情報の拡散を行わないよう注意を呼び掛けるのはなぜですか？", a: "無用な混乱を避けるために、国民が正しい情報を見極められるよう注意を促すためです。" },
            { id: 96, q: "巨大地震警戒対応時、避難所に避難した住民は、自宅に備蓄していた食料や生活用品を後発地震発生までどう扱うべきですか？", a: "備蓄した食料や生活用品等は、後発地震が発生した際に必要となるものであり、避難所では各自で必要なものを準備・購入することを基本とし、備蓄品を安易に消費しないよう留意すべきです。" },
            { id: 97, q: "地方公共団体が、後発地震に備えた避難を検討する際、「避難の移動速度」を設定する上で考慮すべき主な要因は何ですか？", a: "過去の地震事例を参考に、避難者の特性（健常者、要配慮者）別に、地域の状況を考慮して適切に設定する必要があります。" },
            { id: 98, q: "臨時情報（警戒）発表時に、病院が患者等の安全確保のため、入院患者の転院を検討するのはどのような患者ですか？", a: "病院外での生活が可能な入院患者を対象として、引き渡しや転院の準備について検討することが望ましいとされています。" },
            { id: 99, q: "企業が地震に備えた事業継続を考える際、一時的に企業活動が低下する措置であっても推奨されるのはなぜですか？", a: "一時的に企業活動が低下したとしても、後発地震が発生した場合にトータルとして被害軽減・早期復旧できる措置であれば、その実施が推奨されるためです。" },
            { id: 100, q: "北海道・三陸沖後発地震注意情報が発表された際、この情報に伴い防災対応をとるべきエリアはどのような基準で定められていますか？", a: "最大クラスの地震により津波高3m以上、または震度6弱以上が想定される地域とされています。" }
        ];

        function DisasterPreventionApp() {
            const [mode, setMode] = useState('menu'); // menu, learning, test, result
            const [currentCardIndex, setCurrentCardIndex] = useState(0);
            const [isFlipped, setIsFlipped] = useState(false);
            
            // Test Mode State
            const [testQuestions, setTestQuestions] = useState([]);
            const [testResults, setTestResults] = useState([]);
            const [testAnswerRevealed, setTestAnswerRevealed] = useState(false);

            // Initialize Learning Mode
            const startLearning = () => {
                setMode('learning');
                setCurrentCardIndex(0);
                setIsFlipped(false);
            };

            // Initialize Test Mode
            const startTest = () => {
                // Shuffle and pick 10
                const shuffled = [...originalQuestions].sort(() => 0.5 - Math.random());
                setTestQuestions(shuffled.slice(0, 10));
                setTestResults([]);
                setCurrentCardIndex(0);
                setTestAnswerRevealed(false);
                setMode('test');
            };

            // Navigation for Learning
            const handleNext = () => {
                if (currentCardIndex < originalQuestions.length - 1) {
                    setCurrentCardIndex(prev => prev + 1);
                    setIsFlipped(false);
                }
            };

            const handlePrev = () => {
                if (currentCardIndex > 0) {
                    setCurrentCardIndex(prev => prev - 1);
                    setIsFlipped(false);
                }
            };

            // Test Logic
            const handleTestJudgment = (isCorrect) => {
                const currentQ = testQuestions[currentCardIndex];
                setTestResults(prev => [...prev, { id: currentQ.id, correct: isCorrect }]);
                
                if (currentCardIndex < 9) {
                    // Next question
                    setCurrentCardIndex(prev => prev + 1);
                    setTestAnswerRevealed(false);
                } else {
                    // Finish
                    setMode('result');
                }
            };

            // Score Calculation
            const score = useMemo(() => {
                return testResults.filter(r => r.correct).length;
            }, [testResults]);

            // Render Functions
            const renderMenu = () => (
                <div className="flex flex-col items-center justify-center min-h-[60vh] space-y-8 p-6 animate-fade-in">
                    <div className="text-center space-y-4">
                        <h1 className="text-3xl md:text-4xl font-bold text-gray-800">
                            巨大地震情報 防災e-Learning
                        </h1>
                        <p className="text-gray-600 max-w-lg mx-auto">
                            南海トラフ地震臨時情報や北海道・三陸沖後発地震注意情報についての知識を深め、
                            適切な防災行動を学びましょう。
                        </p>
                    </div>
                    
                    <div className="grid md:grid-cols-2 gap-6 w-full max-w-2xl">
                        <button 
                            onClick={startLearning}
                            className="flex flex-col items-center p-8 bg-white border-2 border-blue-500 rounded-xl hover:bg-blue-50 transition-all shadow-md group"
                        >
                            <BookOpen size={48} className="text-blue-500 mb-4 group-hover:scale-110 transition-transform" />
                            <span className="text-xl font-bold text-gray-800">学習モード</span>
                            <span className="text-sm text-gray-500 mt-2">全100問を一問一答形式で学習</span>
                        </button>

                        <button 
                            onClick={startTest}
                            className="flex flex-col items-center p-8 bg-white border-2 border-teal-500 rounded-xl hover:bg-teal-50 transition-all shadow-md group"
                        >
                            <CheckCircle size={48} className="text-teal-500 mb-4 group-hover:scale-110 transition-transform" />
                            <span className="text-xl font-bold text-gray-800">確認テスト</span>
                            <span className="text-sm text-gray-500 mt-2">ランダム10問で理解度をチェック</span>
                        </button>
                    </div>
                </div>
            );

            const renderLearning = () => {
                const question = originalQuestions[currentCardIndex];
                return (
                    <div className="flex flex-col items-center max-w-3xl mx-auto p-4 w-full">
                        <div className="w-full flex justify-between items-center mb-6">
                            <button onClick={() => setMode('menu')} className="text-gray-500 hover:text-gray-700 font-medium">
                                ← メニューへ戻る
                            </button>
                            <span className="bg-blue-100 text-blue-800 px-4 py-1 rounded-full font-bold">
                                Q. {currentCardIndex + 1} / {originalQuestions.length}
                            </span>
                        </div>

                        <div className="w-full bg-white rounded-2xl shadow-lg overflow-hidden min-h-[400px] flex flex-col">
                            <div className="p-8 bg-gray-50 border-b">
                                <h2 className="text-xl md:text-2xl font-bold text-gray-800 leading-relaxed">
                                    {question.q}
                                </h2>
                            </div>
                            
                            <div className="flex-grow p-8 flex flex-col items-center justify-center bg-white relative">
                                {!isFlipped ? (
                                    <button 
                                        onClick={() => setIsFlipped(true)}
                                        className="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition hover:scale-105 flex items-center gap-2"
                                    >
                                        <HelpCircle size={20} />
                                        回答を表示
                                    </button>
                                ) : (
                                    <div className="w-full animate-fade-in">
                                         <div className="bg-green-50 border-l-4 border-green-500 p-6 rounded-r-lg">
                                            <h3 className="text-green-800 font-bold mb-3 flex items-center gap-2">
                                                <CheckCircle size={20} />
                                                回答
                                            </h3>
                                            <p className="text-gray-800 text-lg leading-loose whitespace-pre-wrap">
                                                {question.a}
                                            </p>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>

                        <div className="flex justify-between w-full mt-8">
                            <button 
                                onClick={handlePrev}
                                disabled={currentCardIndex === 0}
                                className={`flex items-center px-6 py-3 rounded-lg font-bold ${currentCardIndex === 0 ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-white text-gray-700 shadow hover:bg-gray-50'}`}
                            >
                                <ChevronLeft size={20} /> 前へ
                            </button>
                            
                            <button 
                                onClick={startTest}
                                className="hidden md:flex items-center px-6 py-3 rounded-lg font-bold bg-teal-100 text-teal-700 hover:bg-teal-200"
                            >
                                <Award size={20} className="mr-2"/>
                                テストに挑戦
                            </button>

                            <button 
                                onClick={handleNext}
                                disabled={currentCardIndex === originalQuestions.length - 1}
                                className={`flex items-center px-6 py-3 rounded-lg font-bold ${currentCardIndex === originalQuestions.length - 1 ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-blue-600 text-white shadow hover:bg-blue-700'}`}
                            >
                                次へ <ChevronRight size={20} />
                            </button>
                        </div>
                        
                        <div className="mt-6 md:hidden">
                            <button 
                                onClick={startTest}
                                className="flex items-center px-6 py-3 rounded-lg font-bold bg-teal-100 text-teal-700 hover:bg-teal-200 w-full justify-center"
                            >
                                <Award size={20} className="mr-2"/>
                                テストに挑戦
                            </button>
                        </div>
                    </div>
                );
            };

            const renderTest = () => {
                const question = testQuestions[currentCardIndex];
                
                return (
                    <div className="flex flex-col items-center max-w-3xl mx-auto p-4 w-full">
                        <div className="w-full mb-6">
                            <div className="flex justify-between items-end mb-2">
                                <span className="text-lg font-bold text-teal-700">確認テスト</span>
                                <span className="text-gray-500 font-medium">第 {currentCardIndex + 1} 問 / 全10問</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2.5">
                                <div className="bg-teal-600 h-2.5 rounded-full transition-all duration-300" style={{ width: `${((currentCardIndex + 1) / 10) * 100}%` }}></div>
                            </div>
                        </div>

                        <div className="w-full bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col mb-6">
                            <div className="p-8 bg-gray-50 border-b">
                                <h2 className="text-xl font-bold text-gray-800 leading-relaxed">
                                    {question.q}
                                </h2>
                            </div>
                            
                            <div className="p-8 min-h-[200px] flex flex-col justify-center items-center">
                                {!testAnswerRevealed ? (
                                    <div className="text-center">
                                        <p className="text-gray-500 mb-6">回答を頭の中で思い浮かべてから、ボタンを押してください。</p>
                                        <button 
                                            onClick={() => setTestAnswerRevealed(true)}
                                            className="bg-teal-600 hover:bg-teal-700 text-white font-bold py-3 px-12 rounded-full shadow-md transition-all"
                                        >
                                            答え合わせ
                                        </button>
                                    </div>
                                ) : (
                                    <div className="w-full animate-fade-in">
                                         <div className="bg-green-50 border-l-4 border-green-500 p-6 rounded-r-lg mb-8">
                                            <h3 className="text-green-800 font-bold mb-2">正解</h3>
                                            <p className="text-gray-800 text-lg leading-relaxed">{question.a}</p>
                                        </div>
                                        
                                        <div className="text-center">
                                            <p className="font-bold text-gray-700 mb-4">自己採点をお願いします</p>
                                            <div className="flex gap-4 justify-center">
                                                <button 
                                                    onClick={() => handleTestJudgment(false)}
                                                    className="flex-1 max-w-[160px] py-3 px-4 bg-red-100 text-red-700 rounded-lg font-bold hover:bg-red-200 transition flex flex-col items-center justify-center gap-1"
                                                >
                                                    <AlertTriangle size={20} />
                                                    間違えた...
                                                </button>
                                                <button 
                                                    onClick={() => handleTestJudgment(true)}
                                                    className="flex-1 max-w-[160px] py-3 px-4 bg-blue-100 text-blue-700 rounded-lg font-bold hover:bg-blue-200 transition flex flex-col items-center justify-center gap-1"
                                                >
                                                    <CheckCircle size={20} />
                                                    正解！
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            };

            const renderResult = () => {
                return (
                    <div className="flex flex-col items-center justify-center min-h-[60vh] space-y-8 p-6 animate-fade-in max-w-2xl mx-auto">
                        <div className="text-center">
                            <h2 className="text-2xl font-bold text-gray-700 mb-2">テスト結果</h2>
                            <div className="text-6xl font-black text-blue-600 mb-4">
                                {score} <span className="text-2xl text-gray-400 font-normal">/ 10</span>
                            </div>
                            
                            {score === 10 && <p className="text-xl text-yellow-500 font-bold mb-4">素晴らしい！全問正解です！</p>}
                            {score >= 7 && score < 10 && <p className="text-xl text-teal-600 font-bold mb-4">合格点です！よく理解されています。</p>}
                            {score < 7 && <p className="text-xl text-red-500 font-bold mb-4">復習して、もう一度挑戦しましょう！</p>}
                        </div>

                        <div className="w-full bg-white rounded-xl shadow p-6">
                            <h3 className="font-bold text-gray-700 mb-4">今回の振り返り</h3>
                            <ul className="space-y-3">
                                {testResults.map((result, index) => (
                                    <li key={index} className="flex items-start gap-3 text-sm border-b pb-2 last:border-0">
                                        {result.correct ? (
                                            <CheckCircle size={18} className="text-blue-500 flex-shrink-0 mt-0.5" />
                                        ) : (
                                            <AlertTriangle size={18} className="text-red-500 flex-shrink-0 mt-0.5" />
                                        )}
                                        <div>
                                            <span className="font-bold text-gray-600">Q{index + 1}: </span>
                                            <span className="text-gray-800">{testQuestions[index].q}</span>
                                        </div>
                                    </li>
                                ))}
                            </ul>
                        </div>

                        <div className="flex flex-col sm:flex-row gap-4 w-full">
                            <button 
                                onClick={startTest}
                                className="flex-1 py-4 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 shadow-lg flex justify-center items-center gap-2"
                            >
                                <RefreshCw size={20} />
                                再度挑戦する（問題が変わります）
                            </button>
                            
                            <button 
                                onClick={() => setMode('menu')}
                                className="flex-1 py-4 bg-white text-gray-700 border-2 border-gray-200 rounded-xl font-bold hover:bg-gray-50 flex justify-center items-center"
                            >
                                メニューへ戻る
                            </button>
                        </div>
                    </div>
                );
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-teal-50 font-sans text-gray-800">
                    <header className="bg-white shadow-sm sticky top-0 z-10">
                        <div className="max-w-5xl mx-auto px-4 py-4 flex items-center justify-between">
                            <div className="flex items-center gap-2">
                                <div className="bg-red-500 p-1.5 rounded-lg text-white">
                                    <AlertTriangle size={20} />
                                </div>
                                <h1 className="font-bold text-lg text-gray-800 sm:text-xl">
                                    巨大地震・津波 防災学習
                                </h1>
                            </div>
                            {mode !== 'menu' && (
                                <span className="text-xs sm:text-sm bg-gray-100 px-3 py-1 rounded-full text-gray-600">
                                    {mode === 'learning' ? '学習モード' : mode === 'test' ? 'テストモード' : '結果発表'}
                                </span>
                            )}
                        </div>
                    </header>

                    <main className="max-w-5xl mx-auto py-6">
                        {mode === 'menu' && renderMenu()}
                        {mode === 'learning' && renderLearning()}
                        {mode === 'test' && renderTest()}
                        {mode === 'result' && renderResult()}
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<DisasterPreventionApp />);
    </script>
</body>
</html>
